<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>nomura_vanish_Z9_SWEmin</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f4f4;
    }
    .page-wrapper {
      padding: 10px 20px 20px 20px;
    }
    .top-row {
      display: flex;
      flex-direction: row;
      align-items: stretch;
    }
    #plotArea {
      flex: 1 1 auto;
      min-width: 0;
      height: 80vh;
    }
    #plot {
      width: 100%;
      height: 100%;
    }
    #trialPanel {
      width: 120px;
      padding-left: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: flex-start;
      justify-content: flex-start;
    }
    .trial-btn {
      width: 100%;
      padding: 6px 4px;
      margin: 0;
      border-radius: 6px;
      border: 1px solid #1976d2;
      background: #fff;
      color: #1976d2;
      cursor: pointer;
      font-size: 13px;
    }
    .trial-btn.active {
      background: #1976d2;
      color: #fff;
    }
    #bottomPanel {
      margin-top: 10px;
      padding: 8px 10px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    #frameSlider {
      width: 100%;
    }
    #frameLabel {
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="page-wrapper">
    <div class="top-row">
      <div id="plotArea">
        <div id="plot"></div>
      </div>
      <div id="trialPanel">
        <div style="font-weight:bold; margin-bottom:4px;">Trial</div>
        <button class="trial-btn" id="trialBtn_1" data-trial="1">1球目</button>
          <button class="trial-btn" id="trialBtn_2" data-trial="2">2球目</button>
          <button class="trial-btn" id="trialBtn_3" data-trial="3">3球目</button>
      </div>
    </div>
    <div id="bottomPanel">
      <div id="frameLabel">Frame:</div>
      <input type="range" id="frameSlider" min="0" max="0" value="0" step="1">
    </div>
  </div>

  <script>
    // Python から渡された Figure & Trial 情報
    const fig = {"data": [{"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 3}, "mode": "lines", "name": "SZ Bottom", "showlegend": true, "x": [0.3002845, 0.3002845, 0.150155, 2.548099e-05, 0.150155, 0.3002845], "y": [0.150414, -0.150414, -0.150414, -0.0, 0.150414, 0.150414], "z": [-0.4301049, -0.4301049, -0.4301049, -0.4301049, -0.4301049, -0.4301049], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 3}, "mode": "lines", "name": "SZ Top", "showlegend": true, "x": [0.3002845, 0.3002845, 0.150155, 2.548099e-05, 0.150155, 0.3002845], "y": [0.150414, -0.150414, -0.150414, -0.0, 0.150414, 0.150414], "z": [0.2297358, 0.2297358, 0.2297358, 0.2297358, 0.2297358, 0.2297358], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "name": "SZ Side", "opacity": 0.3, "showlegend": true, "x": [0.3002845, 0.3002845], "y": [0.150414, 0.150414], "z": [-0.4301049, 0.2297358], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "opacity": 0.3, "showlegend": false, "x": [0.3002845, 0.3002845], "y": [-0.150414, -0.150414], "z": [-0.4301049, 0.2297358], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "opacity": 0.3, "showlegend": false, "x": [0.150155, 0.150155], "y": [-0.150414, -0.150414], "z": [-0.4301049, 0.2297358], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "opacity": 0.3, "showlegend": false, "x": [2.548099e-05, 2.548099e-05], "y": [-0.0, -0.0], "z": [-0.4301049, 0.2297358], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "opacity": 0.3, "showlegend": false, "x": [0.150155, 0.150155], "y": [0.150414, 0.150414], "z": [-0.4301049, 0.2297358], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "marker": {"color": "white", "line": {"color": "blue", "width": 1}, "size": 5}, "mode": "markers+text", "name": "NineGrid", "showlegend": false, "text": ["Z1", "Z2", "Z3", "Z4", "Z5", "Z6", "Z7", "Z8", "Z9"], "textposition": "top center", "x": [0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845], "y": [0.100276, -0.0, -0.100276, 0.100276, -0.0, -0.100276, 0.100276, -0.0, -0.100276], "z": [0.1197624, 0.1197624, 0.1197624, -0.1001846, -0.1001846, -0.1001846, -0.3201314, -0.3201314, -0.3201314], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "name": "Bat", "showlegend": true, "x": [0.119331121444702, 0.328266203403473], "y": [-0.179467916488647, 0.416697859764099], "z": [-0.395318597555161, 0.0955308154225349], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "name": "BOTTOM", "showlegend": true, "x": [0.328266203403473], "y": [0.416697859764099], "z": [0.0955308154225349], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "name": "Sweet Spot", "showlegend": true, "x": [0.14544799347872567], "y": [-0.10494723215220911], "z": [-0.3339624519690226], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "name": "Ball", "showlegend": true, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "name": "S\u2192P", "showlegend": true, "x": [0.14544799347872567, 0.154346406459808], "y": [-0.10494723215220911, -0.100275993347168], "z": [-0.3339624519690226, -0.320131421089172], "type": "scatter3d"}], "layout": {"template": {"data": {"histogram2dcontour": [{"type": "histogram2dcontour", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "choropleth": [{"type": "choropleth", "colorbar": {"outlinewidth": 0, "ticks": ""}}], "histogram2d": [{"type": "histogram2d", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "heatmap": [{"type": "heatmap", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "heatmapgl": [{"type": "heatmapgl", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "contourcarpet": [{"type": "contourcarpet", "colorbar": {"outlinewidth": 0, "ticks": ""}}], "contour": [{"type": "contour", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "surface": [{"type": "surface", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "mesh3d": [{"type": "mesh3d", "colorbar": {"outlinewidth": 0, "ticks": ""}}], "scatter": [{"fillpattern": {"fillmode": "overlay", "size": 10, "solidity": 0.2}, "type": "scatter"}], "parcoords": [{"type": "parcoords", "line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scatterpolargl": [{"type": "scatterpolargl", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "bar": [{"error_x": {"color": "#2a3f5f"}, "error_y": {"color": "#2a3f5f"}, "marker": {"line": {"color": "#E5ECF6", "width": 0.5}, "pattern": {"fillmode": "overlay", "size": 10, "solidity": 0.2}}, "type": "bar"}], "scattergeo": [{"type": "scattergeo", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scatterpolar": [{"type": "scatterpolar", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "histogram": [{"marker": {"pattern": {"fillmode": "overlay", "size": 10, "solidity": 0.2}}, "type": "histogram"}], "scattergl": [{"type": "scattergl", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scatter3d": [{"type": "scatter3d", "line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scattermapbox": [{"type": "scattermapbox", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scatterternary": [{"type": "scatterternary", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scattercarpet": [{"type": "scattercarpet", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "carpet": [{"aaxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "baxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "type": "carpet"}], "table": [{"cells": {"fill": {"color": "#EBF0F8"}, "line": {"color": "white"}}, "header": {"fill": {"color": "#C8D4E3"}, "line": {"color": "white"}}, "type": "table"}], "barpolar": [{"marker": {"line": {"color": "#E5ECF6", "width": 0.5}, "pattern": {"fillmode": "overlay", "size": 10, "solidity": 0.2}}, "type": "barpolar"}], "pie": [{"automargin": true, "type": "pie"}]}, "layout": {"autotypenumbers": "strict", "colorway": ["#636efa", "#EF553B", "#00cc96", "#ab63fa", "#FFA15A", "#19d3f3", "#FF6692", "#B6E880", "#FF97FF", "#FECB52"], "font": {"color": "#2a3f5f"}, "hovermode": "closest", "hoverlabel": {"align": "left"}, "paper_bgcolor": "white", "plot_bgcolor": "#E5ECF6", "polar": {"bgcolor": "#E5ECF6", "angularaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "radialaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "ternary": {"bgcolor": "#E5ECF6", "aaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "baxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "caxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "coloraxis": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "colorscale": {"sequential": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "sequentialminus": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "diverging": [[0, "#8e0152"], [0.1, "#c51b7d"], [0.2, "#de77ae"], [0.3, "#f1b6da"], [0.4, "#fde0ef"], [0.5, "#f7f7f7"], [0.6, "#e6f5d0"], [0.7, "#b8e186"], [0.8, "#7fbc41"], [0.9, "#4d9221"], [1, "#276419"]]}, "xaxis": {"gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "automargin": true, "zerolinewidth": 2}, "yaxis": {"gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "automargin": true, "zerolinewidth": 2}, "scene": {"xaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white", "gridwidth": 2}, "yaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white", "gridwidth": 2}, "zaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white", "gridwidth": 2}}, "shapedefaults": {"line": {"color": "#2a3f5f"}}, "annotationdefaults": {"arrowcolor": "#2a3f5f", "arrowhead": 0, "arrowwidth": 1}, "geo": {"bgcolor": "white", "landcolor": "#E5ECF6", "subunitcolor": "white", "showland": true, "showlakes": true, "lakecolor": "white"}, "title": {"x": 0.05}, "mapbox": {"style": "light"}}}, "scene": {"camera": {"eye": {"x": 1.6, "y": 1.6, "z": 1.0}, "center": {"x": 0, "y": 0, "z": 0}, "up": {"x": 0, "y": 0, "z": 1}}, "xaxis": {"title": {"text": "\u6a2a Z [m]"}}, "yaxis": {"title": {"text": "\u5965\u884c X [m]"}}, "zaxis": {"title": {"text": "\u7e26 Y [m]"}}, "aspectmode": "data"}, "margin": {"l": 0, "r": 0, "t": 60, "b": 100}, "legend": {"itemsizing": "constant", "groupclick": "togglegroup"}, "title": {"text": "Z9 (Z9) / trial 1 / index -1 (MIN=-1)  |  offset=10 cm from TOP"}, "uirevision": "keep_camera"}, "frames": [{"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.876412153244019, -0.214932233095169], "y": [0.458558887243271, 0.0770444124937057], "z": [0.157500550150871, -0.081017829477787], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.214932233095169], "y": [0.0770444124937057], "z": [-0.081017829477787], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.793727163007347], "y": [0.41086957777380395], "z": [0.12768575261865794], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.793727163007347, 0.154346406459808], "y": [0.41086957777380395, -0.100275993347168], "z": [0.12768575261865794, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 1 / index -6  |  offset=10 cm from TOP"}}, "name": "T1_I-6", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.82718551158905, -0.0543822422623634], "y": [0.278266876935959, 0.0914177522063255], "z": [-0.00282119959592819, -0.091490626335144], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0543822422623634], "y": [0.0914177522063255], "z": [-0.091490626335144], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.7305850844885684], "y": [0.25491073188760827], "z": [-0.013904880053473217], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.7305850844885684, 0.154346406459808], "y": [0.25491073188760827, -0.100275993347168], "z": [-0.013904880053473217, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 1 / index -5  |  offset=10 cm from TOP"}}, "name": "T1_I-5", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.727069973945618, 0.0697702467441559], "y": [0.133516371250153, 0.111640386283398], "z": [-0.162432610988617, -0.0948535203933716], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0697702467441559], "y": [0.111640386283398], "z": [-0.0948535203933716], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.6274649330926945], "y": [0.13078187276509237], "z": [-0.15398522353907781], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.6274649330926945, 0.154346406459808], "y": [0.13078187276509237, -0.100275993347168], "z": [-0.15398522353907781, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 1 / index -4  |  offset=10 cm from TOP"}}, "name": "T1_I-4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.553219974040985, 0.194470047950745], "y": [0.0125686647370458, 0.153472304344177], "z": [-0.328463941812515, -0.081268236041069], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.194470047950745], "y": [0.153472304344177], "z": [-0.081268236041069], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.45975871556695963], "y": [0.030181620766835737], "z": [-0.2975644766983078], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.45975871556695963, 0.154346406459808], "y": [0.030181620766835737, -0.100275993347168], "z": [-0.2975644766983078, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 1 / index -3  |  offset=10 cm from TOP"}}, "name": "T1_I-3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.371591240167618, 0.290141254663467], "y": [-0.0580102354288101, 0.157426565885544], "z": [-0.490768641233444, -0.0961838960647583], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.290141254663467], "y": [0.157426565885544], "z": [-0.0961838960647583], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.2888746803296751], "y": [-0.031080635920835802], "z": [-0.44144554928944557], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.2888746803296751, 0.154346406459808], "y": [-0.031080635920835802, -0.100275993347168], "z": [-0.44144554928944557, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 1 / index -2  |  offset=10 cm from TOP"}}, "name": "T1_I-2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.119331121444702, 0.328266203403473], "y": [-0.179467916488647, 0.416697859764099], "z": [-0.395318597555161, 0.0955308154225349], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.328266203403473], "y": [0.416697859764099], "z": [0.0955308154225349], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.14544799347872567], "y": [-0.10494723215220911], "z": [-0.3339624519690226], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.14544799347872567, 0.154346406459808], "y": [-0.10494723215220911, -0.100275993347168], "z": [-0.3339624519690226, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 1 / index -1 (MIN)  |  offset=10 cm from TOP"}}, "name": "T1_I-1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.119331121444702, 0.328266203403473], "y": [-0.179467916488647, 0.416697859764099], "z": [-0.395318597555161, 0.0955308154225349], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.328266203403473], "y": [0.416697859764099], "z": [0.0955308154225349], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.14544799347872567], "y": [-0.10494723215220911], "z": [-0.3339624519690226], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.14544799347872567, 0.154346406459808], "y": [-0.10494723215220911, -0.100275993347168], "z": [-0.3339624519690226, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 1 / index 0  |  offset=10 cm from TOP"}}, "name": "T1_I0", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.459951639175415, 0.32687920331955], "y": [-0.0916475281119347, 0.509764969348907], "z": [-0.356938451528549, 0.153546810150146], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.32687920331955], "y": [0.509764969348907], "z": [0.153546810150146], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.44331759077106847], "y": [-0.016470993396825492], "z": [-0.29312781713341196], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.44331759077106847, 0.154346406459808], "y": [-0.016470993396825492, -0.100275993347168], "z": [-0.29312781713341196, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 1 / index 1  |  offset=10 cm from TOP"}}, "name": "T1_I1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.738211333751678, 0.29354926943779], "y": [0.125522911548615, 0.588533461093903], "z": [-0.279219210147858, 0.19816642999649], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.29354926943779], "y": [0.588533461093903], "z": [0.19816642999649], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.6826285830878447], "y": [0.18339922256203556], "z": [-0.21954601304798788], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.6826285830878447, 0.154346406459808], "y": [0.18339922256203556, -0.100275993347168], "z": [-0.21954601304798788, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 1 / index 2  |  offset=10 cm from TOP"}}, "name": "T1_I2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.805795669555664, 0.114309579133987], "y": [0.443148225545883, 0.604898035526276], "z": [-0.190881684422493, 0.177471414208412], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.114309579133987], "y": [0.604898035526276], "z": [0.177471414208412], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.7193599095728782], "y": [0.46336695148468054], "z": [-0.14483754779675037], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.7193599095728782, 0.154346406459808], "y": [0.46336695148468054, -0.100275993347168], "z": [-0.14483754779675037, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 1 / index 3  |  offset=10 cm from TOP"}}, "name": "T1_I3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.808824002742767, 0.0534437671303749], "y": [0.733376801013947, 0.603329002857208], "z": [-0.081599697470665, 0.147503852844238], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0534437671303749], "y": [0.603329002857208], "z": [0.147503852844238], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.7144014856049566], "y": [0.7171208283643129], "z": [-0.05296175741600567], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.7144014856049566, 0.154346406459808], "y": [0.7171208283643129, -0.100275993347168], "z": [-0.05296175741600567, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 1 / index 4  |  offset=10 cm from TOP"}}, "name": "T1_I4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.861882328987122, -0.18464720249176], "y": [0.423540145158768, 0.0799960866570473], "z": [0.204651534557343, -0.0470031201839447], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.18464720249176], "y": [0.0799960866570473], "z": [-0.0470031201839447], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.7772279383037692], "y": [0.3805971379112719], "z": [0.1731947027624566], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.7772279383037692, 0.154346406459808], "y": [0.3805971379112719, -0.100275993347168], "z": [0.1731947027624566, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 2 / index -6  |  offset=10 cm from TOP"}}, "name": "T2_I-6", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.83212822675705, -0.0726216211915016], "y": [0.280811816453934, 0.0749821290373802], "z": [0.068829357624054, -0.0753358900547028], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0726216211915016], "y": [0.0749821290373802], "z": [-0.0753358900547028], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.737189883464976], "y": [0.255083100758167], "z": [0.050808698324164], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.737189883464976, 0.154346406459808], "y": [0.255083100758167, -0.100275993347168], "z": [0.050808698324164, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 2 / index -5  |  offset=10 cm from TOP"}}, "name": "T2_I-5", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.706947326660156, 0.091936394572258], "y": [0.0969327017664909, 0.117596141993999], "z": [-0.106626532971859, -0.0697739794850349], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.091936394572258], "y": [0.117596141993999], "z": [-0.0697739794850349], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.6070868840145429], "y": [0.09951563121273983], "z": [-0.1020199648243216], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.6070868840145429, 0.154346406459808], "y": [0.09951563121273983, -0.100275993347168], "z": [-0.1020199648243216, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 2 / index -4  |  offset=10 cm from TOP"}}, "name": "T2_I-4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.536662697792053, 0.212731048464775], "y": [-0.0212139207869768, 0.157975256443024], "z": [-0.276583045721054, -0.0614083334803581], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.212731048464775], "y": [0.157975256443024], "z": [-0.0614083334803581], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.44298847255413115], "y": [0.0011847280299942323], "z": [-0.24968620469373098], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.44298847255413115, 0.154346406459808], "y": [0.0011847280299942323, -0.100275993347168], "z": [-0.24968620469373098, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 2 / index -3  |  offset=10 cm from TOP"}}, "name": "T2_I-3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.226842150092125, 0.333634227514267], "y": [-0.128174185752869, 0.277225136756897], "z": [-0.399864315986633, 0.00202864408493042], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.333634227514267], "y": [0.277225136756897], "z": [0.00202864408493042], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.15678262105760865], "y": [-0.07749928357903957], "z": [-0.3496277090039299], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.15678262105760865, 0.154346406459808], "y": [-0.07749928357903957, -0.100275993347168], "z": [-0.3496277090039299, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 2 / index -2  |  offset=10 cm from TOP"}}, "name": "T2_I-2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.0994631722569466, 0.408933341503143], "y": [-0.16367319226265, 0.364440947771072], "z": [-0.466242760419846, 0.0488529279828072], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.408933341503143], "y": [0.364440947771072], "z": [0.0488529279828072], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.13814694647212938], "y": [-0.097658919537522], "z": [-0.40185579427730145], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.13814694647212938, 0.154346406459808], "y": [-0.097658919537522, -0.100275993347168], "z": [-0.40185579427730145, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 2 / index -1 (MIN)  |  offset=10 cm from TOP"}}, "name": "T2_I-1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.0994631722569466, 0.408933341503143], "y": [-0.16367319226265, 0.364440947771072], "z": [-0.466242760419846, 0.0488529279828072], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.408933341503143], "y": [0.364440947771072], "z": [0.0488529279828072], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.13814694647212938], "y": [-0.097658919537522], "z": [-0.40185579427730145], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.13814694647212938, 0.154346406459808], "y": [-0.097658919537522, -0.100275993347168], "z": [-0.40185579427730145, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 2 / index 0  |  offset=10 cm from TOP"}}, "name": "T2_I0", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.459097057580948, 0.457766026258469], "y": [-0.109659127891064, 0.458035588264465], "z": [-0.462325423955917, 0.101341918110847], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.457766026258469], "y": [0.458035588264465], "z": [0.101341918110847], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.45893067865717724], "y": [-0.03869728476298566], "z": [-0.39186700261453494], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.45893067865717724, 0.154346406459808], "y": [-0.03869728476298566, -0.100275993347168], "z": [-0.39186700261453494, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 2 / index 1  |  offset=10 cm from TOP"}}, "name": "T2_I1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.767667591571808, 0.540417611598969], "y": [0.0367081798613071, 0.505664646625519], "z": [-0.48913910984993, 0.117851473391056], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.540417611598969], "y": [0.505664646625519], "z": [0.117851473391056], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.7392613504945881], "y": [0.09532772495969438], "z": [-0.4132653040911504], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.7392613504945881, 0.154346406459808], "y": [0.09532772495969438, -0.100275993347168], "z": [-0.4132653040911504, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 2 / index 2  |  offset=10 cm from TOP"}}, "name": "T2_I2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.930974423885345, 0.306018888950348], "y": [0.460439413785934, 0.647494494915009], "z": [-0.252346038818359, 0.21073180437088], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.306018888950348], "y": [0.647494494915009], "z": [0.21073180437088], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.8528549889073159], "y": [0.483821296865172], "z": [-0.19446131352418206], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.8528549889073159, 0.154346406459808], "y": [0.483821296865172, -0.100275993347168], "z": [-0.19446131352418206, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 2 / index 3  |  offset=10 cm from TOP"}}, "name": "T2_I3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.882288634777069, 0.150456562638283], "y": [0.766502916812897, 0.627131879329681], "z": [-0.121582426130772, 0.169960707426071], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.150456562638283], "y": [0.627131879329681], "z": [0.169960707426071], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.7908096162276237], "y": [0.7490815353121901], "z": [-0.08513953063882357], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.7908096162276237, 0.154346406459808], "y": [0.7490815353121901, -0.100275993347168], "z": [-0.08513953063882357, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 2 / index 4  |  offset=10 cm from TOP"}}, "name": "T2_I4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.829084932804108, -0.137726917862892], "y": [0.419006168842316, 0.126629635691643], "z": [0.232378557324409, -0.0442800410091877], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.137726917862892], "y": [0.126629635691643], "z": [-0.0442800410091877], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.7426651756697507], "y": [0.3824590999711828], "z": [0.1977962304251482], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.7426651756697507, 0.154346406459808], "y": [0.3824590999711828, -0.100275993347168], "z": [0.1977962304251482, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 3 / index -6  |  offset=10 cm from TOP"}}, "name": "T3_I-6", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.80139571428299, -0.0355089642107487], "y": [0.276175290346146, 0.116405814886093], "z": [0.0971862301230431, -0.0698199346661568], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0355089642107487], "y": [0.116405814886093], "z": [-0.0698199346661568], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.7056598599258952], "y": [0.256204103702807], "z": [0.07631045721342206], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.7056598599258952, 0.154346406459808], "y": [0.256204103702807, -0.100275993347168], "z": [0.07631045721342206, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 3 / index -5  |  offset=10 cm from TOP"}}, "name": "T3_I-5", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.723429918289185, 0.0760423839092255], "y": [0.129752084612846, 0.116285189986229], "z": [-0.059688750654459, -0.0854330658912659], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0760423839092255], "y": [0.116285189986229], "z": [-0.0854330658912659], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.6234958874629468], "y": [0.12806872290156554], "z": [-0.06290678983530477], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.6234958874629468, 0.154346406459808], "y": [0.12806872290156554, -0.100275993347168], "z": [-0.06290678983530477, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 3 / index -4  |  offset=10 cm from TOP"}}, "name": "T3_I-4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.52499794960022, 0.231382355093956], "y": [-0.0355131030082703, 0.164010435342789], "z": [-0.225882470607758, -0.0583142153918743], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.231382355093956], "y": [0.164010435342789], "z": [-0.0583142153918743], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.4304504061834391], "y": [-0.010572659308399103], "z": [-0.20493643752496407], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.4304504061834391, 0.154346406459808], "y": [-0.010572659308399103, -0.100275993347168], "z": [-0.20493643752496407, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 3 / index -3  |  offset=10 cm from TOP"}}, "name": "T3_I-3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.293476283550262, 0.347569763660431], "y": [-0.134407997131348, 0.203124701976776], "z": [-0.383139669895172, -0.0438293740153313], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.347569763660431], "y": [0.203124701976776], "z": [-0.0438293740153313], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.2133455172883756], "y": [-0.09221640428764818], "z": [-0.3407258774262782], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.2133455172883756, 0.154346406459808], "y": [-0.09221640428764818, -0.100275993347168], "z": [-0.3407258774262782, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 3 / index -2  |  offset=10 cm from TOP"}}, "name": "T3_I-2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.0608170703053474, 0.44479775428772], "y": [-0.154129818081856, 0.324714452028275], "z": [-0.481071829795837, 0.0320237129926682], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.44479775428772], "y": [0.324714452028275], "z": [0.0320237129926682], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.10881465442627684], "y": [-0.09427428603511594], "z": [-0.41693488878711743], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.10881465442627684, 0.154346406459808], "y": [-0.09427428603511594, -0.100275993347168], "z": [-0.41693488878711743, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 3 / index -1 (MIN)  |  offset=10 cm from TOP"}}, "name": "T3_I-1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.0608170703053474, 0.44479775428772], "y": [-0.154129818081856, 0.324714452028275], "z": [-0.481071829795837, 0.0320237129926682], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.44479775428772], "y": [0.324714452028275], "z": [0.0320237129926682], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.10881465442627684], "y": [-0.09427428603511594], "z": [-0.41693488878711743], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.10881465442627684, 0.154346406459808], "y": [-0.09427428603511594, -0.100275993347168], "z": [-0.41693488878711743, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 3 / index 0  |  offset=10 cm from TOP"}}, "name": "T3_I0", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.412410318851471, 0.506666600704193], "y": [-0.116654857993126, 0.411217600107193], "z": [-0.511273264884949, 0.0824156031012535], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.506666600704193], "y": [0.411217600107193], "z": [0.0824156031012535], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.42419235361674756], "y": [-0.050670803342127285], "z": [-0.437062159323828], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.42419235361674756, 0.154346406459808], "y": [-0.050670803342127285, -0.100275993347168], "z": [-0.437062159323828, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 3 / index 1  |  offset=10 cm from TOP"}}, "name": "T3_I1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.749022424221039, 0.607416331768036], "y": [0.0227869916707277, 0.453798890113831], "z": [-0.564770400524139, 0.094150573015213], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.607416331768036], "y": [0.453798890113831], "z": [0.094150573015213], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.7313216680768254], "y": [0.07666346250215039], "z": [-0.48240530401673515], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.7313216680768254, 0.154346406459808], "y": [0.07666346250215039, -0.100275993347168], "z": [-0.48240530401673515, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 3 / index 2  |  offset=10 cm from TOP"}}, "name": "T3_I2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.960613787174225, 0.400118708610535], "y": [0.327874839305878, 0.618253946304321], "z": [-0.302102267742157, 0.189350247383118], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.400118708610535], "y": [0.618253946304321], "z": [0.189350247383118], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.8905519206080681], "y": [0.3641722182235645], "z": [-0.24067071935721135], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.8905519206080681, 0.154346406459808], "y": [0.3641722182235645, -0.100275993347168], "z": [-0.24067071935721135, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 3 / index 3  |  offset=10 cm from TOP"}}, "name": "T3_I3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [1.02063024044037, 0.327655673027039], "y": [0.673689067363739, 0.670931994915009], "z": [-0.209726899862289, 0.189996749162674], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.327655673027039], "y": [0.670931994915009], "z": [0.189996749162674], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.9340084430721232], "y": [0.6733444334013774], "z": [-0.1597614573232062], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.320131421089172], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.9340084430721232, 0.154346406459808], "y": [0.6733444334013774, -0.100275993347168], "z": [-0.1597614573232062, -0.320131421089172], "type": "scatter3d"}], "layout": {"title": {"text": "Z9 (Z9) / trial 3 / index 4  |  offset=10 cm from TOP"}}, "name": "T3_I4", "traces": [8, 9, 10, 11, 12]}]};
    const trialInfo = {"1": [{"name": "T1_I-6", "index": -6}, {"name": "T1_I-5", "index": -5}, {"name": "T1_I-4", "index": -4}, {"name": "T1_I-3", "index": -3}, {"name": "T1_I-2", "index": -2}, {"name": "T1_I-1", "index": -1}, {"name": "T1_I0", "index": 0}, {"name": "T1_I1", "index": 1}, {"name": "T1_I2", "index": 2}, {"name": "T1_I3", "index": 3}, {"name": "T1_I4", "index": 4}], "2": [{"name": "T2_I-6", "index": -6}, {"name": "T2_I-5", "index": -5}, {"name": "T2_I-4", "index": -4}, {"name": "T2_I-3", "index": -3}, {"name": "T2_I-2", "index": -2}, {"name": "T2_I-1", "index": -1}, {"name": "T2_I0", "index": 0}, {"name": "T2_I1", "index": 1}, {"name": "T2_I2", "index": 2}, {"name": "T2_I3", "index": 3}, {"name": "T2_I4", "index": 4}], "3": [{"name": "T3_I-6", "index": -6}, {"name": "T3_I-5", "index": -5}, {"name": "T3_I-4", "index": -4}, {"name": "T3_I-3", "index": -3}, {"name": "T3_I-2", "index": -2}, {"name": "T3_I-1", "index": -1}, {"name": "T3_I0", "index": 0}, {"name": "T3_I1", "index": 1}, {"name": "T3_I2", "index": 2}, {"name": "T3_I3", "index": 3}, {"name": "T3_I4", "index": 4}]};  // { trial: [{name, index}, ...], ... }
    let currentTrial = "1";  // 文字列として扱う

    document.addEventListener("DOMContentLoaded", function() {
      const plotDiv = document.getElementById("plot");
      const slider = document.getElementById("frameSlider");
      const frameLabel = document.getElementById("frameLabel");

      // Plot を生成
      Plotly.newPlot(plotDiv, fig.data, fig.layout, {responsive: true}).then(function(gd) {
        // frames を追加
        Plotly.addFrames(gd, fig.frames);

        // Trial ボタンにイベントを付与
        Object.keys(trialInfo).forEach(function(trialKey) {
          const btn = document.getElementById("trialBtn_" + trialKey);
          if (!btn) return;
          btn.addEventListener("click", function() {
            // active クラス切り替え
            document.querySelectorAll(".trial-btn").forEach(b => b.classList.remove("active"));
            btn.classList.add("active");

            currentTrial = trialKey;
            updateSliderForTrial(gd, currentTrial);
          });
        });

        // スライダー操作でフレーム更新
        slider.addEventListener("input", function(e) {
          const idxInTrial = parseInt(slider.value);
          updateFrameForCurrentTrial(gd, idxInTrial);
        });

        // 初期 Trial ボタンを active に
        const initBtn = document.getElementById("trialBtn_1");
        if (initBtn) {
          initBtn.classList.add("active");
        }

        // 初期表示
        updateSliderForTrial(gd, currentTrial);

        // ===== 関数群 =====
        function updateSliderForTrial(gd, trialKey) {
          const framesForTrial = trialInfo[trialKey];
          if (!framesForTrial || framesForTrial.length === 0) return;

          slider.min = 0;
          slider.max = framesForTrial.length - 1;
          slider.value = 0;

          updateFrame(gd, trialKey, 0);
        }

        function updateFrameForCurrentTrial(gd, idxInTrial) {
          updateFrame(gd, currentTrial, idxInTrial);
        }

        function updateFrame(gd, trialKey, idxInTrial) {
          const framesForTrial = trialInfo[trialKey];
          if (!framesForTrial || framesForTrial.length === 0) return;

          const clampedIdx = Math.max(0, Math.min(idxInTrial, framesForTrial.length - 1));
          const frameInfo = framesForTrial[clampedIdx];
          const frameName = frameInfo.name;
          const indexValue = frameInfo.index;

          Plotly.animate(gd, [frameName], {
            mode: "immediate",
            frame: {duration: 0, redraw: true},
            transition: {duration: 0}
          });

          frameLabel.textContent = "Trial " + trialKey + " / frame index = " + indexValue + " (step " + clampedIdx + ")";
        }
      });
    });
  </script>
</body>
</html>

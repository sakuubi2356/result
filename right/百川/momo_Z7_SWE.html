<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Momo_vanish_Z7_SWEmin</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f4f4;
    }
    .page-wrapper {
      padding: 10px 20px 20px 20px;
    }
    .top-row {
      display: flex;
      flex-direction: row;
      align-items: stretch;
    }
    #plotArea {
      flex: 1 1 auto;
      min-width: 0;
      height: 80vh;
    }
    #plot {
      width: 100%;
      height: 100%;
    }
    #trialPanel {
      width: 120px;
      padding-left: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: flex-start;
      justify-content: flex-start;
    }
    .trial-btn {
      width: 100%;
      padding: 6px 4px;
      margin: 0;
      border-radius: 6px;
      border: 1px solid #1976d2;
      background: #fff;
      color: #1976d2;
      cursor: pointer;
      font-size: 13px;
    }
    .trial-btn.active {
      background: #1976d2;
      color: #fff;
    }
    #bottomPanel {
      margin-top: 10px;
      padding: 8px 10px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    #frameSlider {
      width: 100%;
    }
    #frameLabel {
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="page-wrapper">
    <div class="top-row">
      <div id="plotArea">
        <div id="plot"></div>
      </div>
      <div id="trialPanel">
        <div style="font-weight:bold; margin-bottom:4px;">Trial</div>
        <button class="trial-btn" id="trialBtn_1" data-trial="1">1球目</button>
          <button class="trial-btn" id="trialBtn_2" data-trial="2">2球目</button>
          <button class="trial-btn" id="trialBtn_3" data-trial="3">3球目</button>
      </div>
    </div>
    <div id="bottomPanel">
      <div id="frameLabel">Frame:</div>
      <input type="range" id="frameSlider" min="0" max="0" value="0" step="1">
    </div>
  </div>

  <script>
    // Python から渡された Figure & Trial 情報
    const fig = {"data": [{"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 3}, "mode": "lines", "name": "SZ Bottom", "showlegend": true, "x": [0.3002845, 0.3002845, 0.150155, 2.548099e-05, 0.150155, 0.3002845], "y": [0.150414, -0.150414, -0.150414, -0.0, 0.150414, 0.150414], "z": [-0.4695162, -0.4695162, -0.4695162, -0.4695162, -0.4695162, -0.4695162], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 3}, "mode": "lines", "name": "SZ Top", "showlegend": true, "x": [0.3002845, 0.3002845, 0.150155, 2.548099e-05, 0.150155, 0.3002845], "y": [0.150414, -0.150414, -0.150414, -0.0, 0.150414, 0.150414], "z": [0.06407398, 0.06407398, 0.06407398, 0.06407398, 0.06407398, 0.06407398], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "name": "SZ Side", "opacity": 0.3, "showlegend": true, "x": [0.3002845, 0.3002845], "y": [0.150414, 0.150414], "z": [-0.4695162, 0.06407398], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "opacity": 0.3, "showlegend": false, "x": [0.3002845, 0.3002845], "y": [-0.150414, -0.150414], "z": [-0.4695162, 0.06407398], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "opacity": 0.3, "showlegend": false, "x": [0.150155, 0.150155], "y": [-0.150414, -0.150414], "z": [-0.4695162, 0.06407398], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "opacity": 0.3, "showlegend": false, "x": [2.548099e-05, 2.548099e-05], "y": [-0.0, -0.0], "z": [-0.4695162, 0.06407398], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "opacity": 0.3, "showlegend": false, "x": [0.150155, 0.150155], "y": [0.150414, 0.150414], "z": [-0.4695162, 0.06407398], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "marker": {"color": "white", "line": {"color": "blue", "width": 1}, "size": 5}, "mode": "markers+text", "name": "NineGrid", "showlegend": false, "text": ["Z1", "Z2", "Z3", "Z4", "Z5", "Z6", "Z7", "Z8", "Z9"], "textposition": "top center", "x": [0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845], "y": [0.100276, -0.0, -0.100276, 0.100276, -0.0, -0.100276, 0.100276, -0.0, -0.100276], "z": [-0.0248577, -0.0248577, -0.0248577, -0.2027211, -0.2027211, -0.2027211, -0.3805845, -0.3805845, -0.3805845], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "name": "Bat", "showlegend": true, "x": [0.0422537326812744, 0.160168379545212], "y": [0.115913346409798, 0.616254985332489], "z": [-0.477440267801285, 0.135548010468483], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "name": "BOTTOM", "showlegend": true, "x": [0.160168379545212], "y": [0.616254985332489], "z": [0.135548010468483], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "name": "Sweet Spot", "showlegend": true, "x": [0.05699306067337698], "y": [0.17845603911444063], "z": [-0.40081674791610966], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "name": "Ball", "showlegend": true, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "name": "S\u2192P", "showlegend": true, "x": [0.05699306067337698, 0.154346406459808], "y": [0.17845603911444063, 0.100275993347168], "z": [-0.40081674791610966, -0.380584537982941], "type": "scatter3d"}], "layout": {"template": {"data": {"histogram2dcontour": [{"type": "histogram2dcontour", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "choropleth": [{"type": "choropleth", "colorbar": {"outlinewidth": 0, "ticks": ""}}], "histogram2d": [{"type": "histogram2d", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "heatmap": [{"type": "heatmap", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "heatmapgl": [{"type": "heatmapgl", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "contourcarpet": [{"type": "contourcarpet", "colorbar": {"outlinewidth": 0, "ticks": ""}}], "contour": [{"type": "contour", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "surface": [{"type": "surface", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "mesh3d": [{"type": "mesh3d", "colorbar": {"outlinewidth": 0, "ticks": ""}}], "scatter": [{"fillpattern": {"fillmode": "overlay", "size": 10, "solidity": 0.2}, "type": "scatter"}], "parcoords": [{"type": "parcoords", "line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scatterpolargl": [{"type": "scatterpolargl", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "bar": [{"error_x": {"color": "#2a3f5f"}, "error_y": {"color": "#2a3f5f"}, "marker": {"line": {"color": "#E5ECF6", "width": 0.5}, "pattern": {"fillmode": "overlay", "size": 10, "solidity": 0.2}}, "type": "bar"}], "scattergeo": [{"type": "scattergeo", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scatterpolar": [{"type": "scatterpolar", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "histogram": [{"marker": {"pattern": {"fillmode": "overlay", "size": 10, "solidity": 0.2}}, "type": "histogram"}], "scattergl": [{"type": "scattergl", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scatter3d": [{"type": "scatter3d", "line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scattermapbox": [{"type": "scattermapbox", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scatterternary": [{"type": "scatterternary", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scattercarpet": [{"type": "scattercarpet", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "carpet": [{"aaxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "baxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "type": "carpet"}], "table": [{"cells": {"fill": {"color": "#EBF0F8"}, "line": {"color": "white"}}, "header": {"fill": {"color": "#C8D4E3"}, "line": {"color": "white"}}, "type": "table"}], "barpolar": [{"marker": {"line": {"color": "#E5ECF6", "width": 0.5}, "pattern": {"fillmode": "overlay", "size": 10, "solidity": 0.2}}, "type": "barpolar"}], "pie": [{"automargin": true, "type": "pie"}]}, "layout": {"autotypenumbers": "strict", "colorway": ["#636efa", "#EF553B", "#00cc96", "#ab63fa", "#FFA15A", "#19d3f3", "#FF6692", "#B6E880", "#FF97FF", "#FECB52"], "font": {"color": "#2a3f5f"}, "hovermode": "closest", "hoverlabel": {"align": "left"}, "paper_bgcolor": "white", "plot_bgcolor": "#E5ECF6", "polar": {"bgcolor": "#E5ECF6", "angularaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "radialaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "ternary": {"bgcolor": "#E5ECF6", "aaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "baxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "caxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "coloraxis": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "colorscale": {"sequential": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "sequentialminus": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "diverging": [[0, "#8e0152"], [0.1, "#c51b7d"], [0.2, "#de77ae"], [0.3, "#f1b6da"], [0.4, "#fde0ef"], [0.5, "#f7f7f7"], [0.6, "#e6f5d0"], [0.7, "#b8e186"], [0.8, "#7fbc41"], [0.9, "#4d9221"], [1, "#276419"]]}, "xaxis": {"gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "automargin": true, "zerolinewidth": 2}, "yaxis": {"gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "automargin": true, "zerolinewidth": 2}, "scene": {"xaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white", "gridwidth": 2}, "yaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white", "gridwidth": 2}, "zaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white", "gridwidth": 2}}, "shapedefaults": {"line": {"color": "#2a3f5f"}}, "annotationdefaults": {"arrowcolor": "#2a3f5f", "arrowhead": 0, "arrowwidth": 1}, "geo": {"bgcolor": "white", "landcolor": "#E5ECF6", "subunitcolor": "white", "showland": true, "showlakes": true, "lakecolor": "white"}, "title": {"x": 0.05}, "mapbox": {"style": "light"}}}, "scene": {"camera": {"eye": {"x": 1.6, "y": 1.6, "z": 1.0}, "center": {"x": 0, "y": 0, "z": 0}, "up": {"x": 0, "y": 0, "z": 1}}, "xaxis": {"title": {"text": "\u6a2a Z [m]"}}, "yaxis": {"title": {"text": "\u5965\u884c X [m]"}}, "zaxis": {"title": {"text": "\u7e26 Y [m]"}}, "aspectmode": "data"}, "margin": {"l": 0, "r": 0, "t": 60, "b": 100}, "legend": {"itemsizing": "constant", "groupclick": "togglegroup"}, "title": {"text": "Z7 (Z7) / trial 1 / index -1 (MIN=-1)  |  offset=10 cm from TOP"}, "uirevision": "keep_camera"}, "frames": [{"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.815519273281097, -0.0175525210797787], "y": [0.221278384327888, 0.231539592146873], "z": [-0.109976910054684, -0.0539067722856998], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0175525210797787], "y": [0.231539592146873], "z": [-0.0539067722856998], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.7157734362969015], "y": [0.22256103521471993], "z": [-0.10296814332830355], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.7157734362969015, 0.154346406459808], "y": [0.22256103521471993, 0.100275993347168], "z": [-0.10296814332830355, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 1 / index -6  |  offset=10 cm from TOP"}}, "name": "T1_I-6", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.71296888589859, 0.0540506280958652], "y": [0.152161777019501, 0.282387137413025], "z": [-0.213382065296173, -0.0270425044000149], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0540506280958652], "y": [0.282387137413025], "z": [-0.0270425044000149], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.6170914474951683], "y": [0.16843994692507624], "z": [-0.1900896203896524], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.6170914474951683, 0.154346406459808], "y": [0.16843994692507624, 0.100275993347168], "z": [-0.1900896203896524, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 1 / index -5  |  offset=10 cm from TOP"}}, "name": "T1_I-5", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.572250127792358, 0.117412425577641], "y": [0.0978175401687622, 0.345856547355652], "z": [-0.314268171787262, 0.00642158649861813], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.117412425577641], "y": [0.345856547355652], "z": [0.00642158649861813], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.48604228893315765], "y": [0.12882242314794817], "z": [-0.2741819428467251], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.48604228893315765, 0.154346406459808], "y": [0.12882242314794817, 0.100275993347168], "z": [-0.2741819428467251, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 1 / index -4  |  offset=10 cm from TOP"}}, "name": "T1_I-4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.411677032709122, 0.186298877000809], "y": [0.0793415978550911, 0.381457179784775], "z": [-0.41437891125679, 0.0228290967643261], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.186298877000809], "y": [0.381457179784775], "z": [0.0228290967643261], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.336930035569754], "y": [0.11710604985318393], "z": [-0.35972790409378286], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.336930035569754, 0.154346406459808], "y": [0.11710604985318393, 0.100275993347168], "z": [-0.35972790409378286, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 1 / index -3  |  offset=10 cm from TOP"}}, "name": "T1_I-3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.180458292365074, 0.160958245396614], "y": [0.0589687675237656, 0.534515500068665], "z": [-0.446685642004013, 0.098557785153389], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.160958245396614], "y": [0.534515500068665], "z": [0.098557785153389], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.1377812365459588], "y": [0.11841209321170448], "z": [-0.3785302318169284], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.1377812365459588, 0.154346406459808], "y": [0.11841209321170448, 0.100275993347168], "z": [-0.3785302318169284, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 1 / index -2  |  offset=10 cm from TOP"}}, "name": "T1_I-2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.0422537326812744, 0.160168379545212], "y": [0.115913346409798, 0.616254985332489], "z": [-0.477440267801285, 0.135548010468483], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.160168379545212], "y": [0.616254985332489], "z": [0.135548010468483], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.05699306067337698], "y": [0.17845603911444063], "z": [-0.40081674791610966], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.05699306067337698, 0.154346406459808], "y": [0.17845603911444063, 0.100275993347168], "z": [-0.40081674791610966, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 1 / index -1 (MIN)  |  offset=10 cm from TOP"}}, "name": "T1_I-1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.0422537326812744, 0.160168379545212], "y": [0.115913346409798, 0.616254985332489], "z": [-0.477440267801285, 0.135548010468483], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.160168379545212], "y": [0.616254985332489], "z": [0.135548010468483], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.05699306067337698], "y": [0.17845603911444063], "z": [-0.40081674791610966], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.05699306067337698, 0.154346406459808], "y": [0.17845603911444063, 0.100275993347168], "z": [-0.40081674791610966, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 1 / index 0  |  offset=10 cm from TOP"}}, "name": "T1_I0", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.256477862596512, 0.0870233029127121], "y": [0.172568917274475, 0.691371083259583], "z": [-0.41833233833313, 0.166586235165596], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0870233029127121], "y": [0.691371083259583], "z": [0.166586235165596], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.23529604715127567], "y": [0.23741917419875652], "z": [-0.3452175322313654], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.23529604715127567, 0.154346406459808], "y": [0.23741917419875652, 0.100275993347168], "z": [-0.3452175322313654, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 1 / index 1  |  offset=10 cm from TOP"}}, "name": "T1_I1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.455250442028046, 0.0351026058197021], "y": [0.306513011455536, 0.742601335048676], "z": [-0.339813590049744, 0.182970315217972], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0351026058197021], "y": [0.742601335048676], "z": [0.182970315217972], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.40273197242519426], "y": [0.3610240416049995], "z": [-0.2744656142385635], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.40273197242519426, 0.154346406459808], "y": [0.3610240416049995, 0.100275993347168], "z": [-0.2744656142385635, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 1 / index 2  |  offset=10 cm from TOP"}}, "name": "T1_I2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.591901838779449, -0.0463258102536201], "y": [0.421209871768951, 0.732530891895294], "z": [-0.202180251479149, 0.166255727410316], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0463258102536201], "y": [0.732530891895294], "z": [0.166255727410316], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.5121234063409551], "y": [0.4601249877286884], "z": [-0.15612576779409548], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.5121234063409551, 0.154346406459808], "y": [0.4601249877286884, 0.100275993347168], "z": [-0.15612576779409548, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 1 / index 3  |  offset=10 cm from TOP"}}, "name": "T1_I3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.662197053432465, -0.0870945975184441], "y": [0.624159395694733, 0.730928003787994], "z": [-0.104732170701027, 0.154424995183945], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0870945975184441], "y": [0.730928003787994], "z": [0.154424995183945], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.5685355934406914], "y": [0.637505472222629], "z": [-0.07233752371235122], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.5685355934406914, 0.154346406459808], "y": [0.637505472222629, 0.100275993347168], "z": [-0.07233752371235122, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 1 / index 4  |  offset=10 cm from TOP"}}, "name": "T1_I4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.808785796165466, -0.00982370972633362], "y": [0.229877203702927, 0.189143568277359], "z": [-0.0552509799599648, -0.0546339526772499], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.00982370972633362], "y": [0.189143568277359], "z": [-0.0546339526772499], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.7089155373380697], "y": [0.22478549937555], "z": [-0.05517385155115263], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.7089155373380697, 0.154346406459808], "y": [0.22478549937555, 0.100275993347168], "z": [-0.05517385155115263, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 2 / index -6  |  offset=10 cm from TOP"}}, "name": "T2_I-6", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.703714072704315, 0.0779402703046799], "y": [0.145867347717285, 0.247668385505676], "z": [-0.158660590648651, -0.0220832750201225], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0779402703046799], "y": [0.247668385505676], "z": [-0.0220832750201225], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.6060073047421852], "y": [0.15859247419608696], "z": [-0.14158843054827064], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.6060073047421852, 0.154346406459808], "y": [0.15859247419608696, 0.100275993347168], "z": [-0.14158843054827064, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 2 / index -5  |  offset=10 cm from TOP"}}, "name": "T2_I-5", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.546975910663605, 0.137087717652321], "y": [0.0643738955259323, 0.362392127513885], "z": [-0.244489416480064, 0.0440284833312035], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.137087717652321], "y": [0.362392127513885], "z": [0.0440284833312035], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.46146799003754135], "y": [0.10162616018540738], "z": [-0.2084246928855702], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.46146799003754135, 0.154346406459808], "y": [0.10162616018540738, 0.100275993347168], "z": [-0.2084246928855702, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 2 / index -4  |  offset=10 cm from TOP"}}, "name": "T2_I-4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.34736156463623, 0.177943199872971], "y": [0.0208108685910702, 0.457484692335129], "z": [-0.321582704782486, 0.0947952643036842], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.177943199872971], "y": [0.457484692335129], "z": [0.0947952643036842], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.28169845558597345], "y": [0.07539510777018471], "z": [-0.2695354479566807], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.28169845558597345, 0.154346406459808], "y": [0.07539510777018471, 0.100275993347168], "z": [-0.2695354479566807, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 2 / index -3  |  offset=10 cm from TOP"}}, "name": "T2_I-3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.126768097281456, 0.132203847169876], "y": [0.0109163578599691, 0.575378239154816], "z": [-0.352878212928772, 0.151419922709465], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.132203847169876], "y": [0.575378239154816], "z": [0.151419922709465], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.09439661163649088], "y": [0.08147407686763576], "z": [-0.2898409604063708], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.09439661163649088, 0.154346406459808], "y": [0.08147407686763576, 0.100275993347168], "z": [-0.2898409604063708, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 2 / index -2  |  offset=10 cm from TOP"}}, "name": "T2_I-2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.0993716642260551, 0.0999882444739342], "y": [0.0989072099328041, 0.656730175018311], "z": [-0.383472234010696, 0.189967885613441], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0999882444739342], "y": [0.656730175018311], "z": [0.189967885613441], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.09944873673227186], "y": [0.16863505816066032], "z": [-0.31179224209285444], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.09944873673227186, 0.154346406459808], "y": [0.16863505816066032, 0.100275993347168], "z": [-0.31179224209285444, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 2 / index -1 (MIN)  |  offset=10 cm from TOP"}}, "name": "T2_I-1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.0993716642260551, 0.0999882444739342], "y": [0.0989072099328041, 0.656730175018311], "z": [-0.383472234010696, 0.189967885613441], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0999882444739342], "y": [0.656730175018311], "z": [0.189967885613441], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.09944873673227186], "y": [0.16863505816066032], "z": [-0.31179224209285444], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.09944873673227186, 0.154346406459808], "y": [0.16863505816066032, 0.100275993347168], "z": [-0.31179224209285444, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 2 / index 0  |  offset=10 cm from TOP"}}, "name": "T2_I0", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.320948362350464, 0.0473618805408478], "y": [0.219704762101173, 0.719342112541199], "z": [-0.346915006637573, 0.214790493249893], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0473618805408478], "y": [0.719342112541199], "z": [0.214790493249893], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.2867500551590282], "y": [0.282159425363934], "z": [-0.2767018253823748], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.2867500551590282, 0.154346406459808], "y": [0.282159425363934, 0.100275993347168], "z": [-0.2767018253823748, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 2 / index 1  |  offset=10 cm from TOP"}}, "name": "T2_I1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.502457499504089, -0.0520565286278725], "y": [0.319226145744324, 0.707901120185852], "z": [-0.229352071881294, 0.196613296866417], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0520565286278725], "y": [0.707901120185852], "z": [0.196613296866417], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.43314327514963225], "y": [0.36781049710899605], "z": [-0.17610642318946076], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.43314327514963225, 0.154346406459808], "y": [0.36781049710899605, 0.100275993347168], "z": [-0.17610642318946076, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 2 / index 2  |  offset=10 cm from TOP"}}, "name": "T2_I2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.611985981464386, -0.0988114550709724], "y": [0.524074196815491, 0.700445771217346], "z": [-0.13573956489563, 0.186223447322845], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0988114550709724], "y": [0.700445771217346], "z": [0.186223447322845], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.5231363094829385], "y": [0.5461206417335246], "z": [-0.09549419180423838], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.5231363094829385, 0.154346406459808], "y": [0.5461206417335246, 0.100275993347168], "z": [-0.09549419180423838, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 2 / index 3  |  offset=10 cm from TOP"}}, "name": "T2_I3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.639286518096924, -0.127364724874496], "y": [0.744343340396881, 0.679085552692413], "z": [-0.0483875200152397, 0.170672252774239], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.127364724874496], "y": [0.679085552692413], "z": [0.170672252774239], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.5434551045843393], "y": [0.7361861162408426], "z": [-0.021005046090334087], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.5434551045843393, 0.154346406459808], "y": [0.7361861162408426, 0.100275993347168], "z": [-0.021005046090334087, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 2 / index 4  |  offset=10 cm from TOP"}}, "name": "T2_I4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.804541826248169, -0.0100101232528687], "y": [0.260661780834198, 0.173234939575195], "z": [-0.0409704111516476, -0.00816753972321749], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0100101232528687], "y": [0.173234939575195], "z": [-0.00816753972321749], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.7052253717544423], "y": [0.24973342659899714], "z": [-0.0368700525690971], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.7052253717544423, 0.154346406459808], "y": [0.24973342659899714, 0.100275993347168], "z": [-0.0368700525690971, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 3 / index -6  |  offset=10 cm from TOP"}}, "name": "T3_I-6", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.690839171409607, 0.0831843316555023], "y": [0.152477011084557, 0.264705151319504], "z": [-0.134008675813675, 0.0341968610882759], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0831843316555023], "y": [0.264705151319504], "z": [0.0341968610882759], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.5940862820088946], "y": [0.1665055215843035], "z": [-0.11298299423680312], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.5940862820088946, 0.154346406459808], "y": [0.1665055215843035, 0.100275993347168], "z": [-0.11298299423680312, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 3 / index -5  |  offset=10 cm from TOP"}}, "name": "T3_I-5", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.539681077003479, 0.155405849218369], "y": [0.0786944180727005, 0.347196877002716], "z": [-0.222925052046776, 0.0682116225361824], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.155405849218369], "y": [0.347196877002716], "z": [0.0682116225361824], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.4527952091040511], "y": [0.1122572262585346], "z": [-0.18653296683523493], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.4527952091040511, 0.154346406459808], "y": [0.1122572262585346, 0.100275993347168], "z": [-0.18653296683523493, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 3 / index -4  |  offset=10 cm from TOP"}}, "name": "T3_I-4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.363055199384689, 0.232508108019829], "y": [0.0410326048731804, 0.395568937063217], "z": [-0.311429768800735, 0.0880803093314171], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.232508108019829], "y": [0.395568937063217], "z": [0.0880803093314171], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.2886097840106627], "y": [0.08534964755684596], "z": [-0.2614910077271676], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.2886097840106627, 0.154346406459808], "y": [0.08534964755684596, 0.100275993347168], "z": [-0.2614910077271676, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 3 / index -3  |  offset=10 cm from TOP"}}, "name": "T3_I-3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.123263776302338, 0.180496126413345], "y": [0.0288046300411224, 0.587396681308746], "z": [-0.330119401216507, 0.155375435948372], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.180496126413345], "y": [0.587396681308746], "z": [0.155375435948372], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.08529380018465135], "y": [0.09862861489409822], "z": [-0.26943256530563], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.08529380018465135, 0.154346406459808], "y": [0.09862861489409822, 0.100275993347168], "z": [-0.26943256530563, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 3 / index -2  |  offset=10 cm from TOP"}}, "name": "T3_I-2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.114258721470833, 0.155320718884468], "y": [0.108894050121307, 0.690987110137939], "z": [-0.359318405389786, 0.187930390238762], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.155320718884468], "y": [0.690987110137939], "z": [0.187930390238762], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.11939147250102788], "y": [0.18165570181040758], "z": [-0.29091228789773677], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.11939147250102788, 0.154346406459808], "y": [0.18165570181040758, 0.100275993347168], "z": [-0.29091228789773677, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 3 / index -1 (MIN)  |  offset=10 cm from TOP"}}, "name": "T3_I-1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.114258721470833, 0.155320718884468], "y": [0.108894050121307, 0.690987110137939], "z": [-0.359318405389786, 0.187930390238762], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.155320718884468], "y": [0.690987110137939], "z": [0.187930390238762], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.11939147250102788], "y": [0.18165570181040758], "z": [-0.29091228789773677], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.11939147250102788, 0.154346406459808], "y": [0.18165570181040758, 0.100275993347168], "z": [-0.29091228789773677, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 3 / index 0  |  offset=10 cm from TOP"}}, "name": "T3_I0", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.307039439678192, 0.0360338315367699], "y": [0.203223705291748, 0.755773901939392], "z": [-0.314025849103928, 0.197095051407814], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0360338315367699], "y": [0.755773901939392], "z": [0.197095051407814], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.2731637475105214], "y": [0.27229246182852634], "z": [-0.25013575323121495], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.2731637475105214, 0.154346406459808], "y": [0.27229246182852634, 0.100275993347168], "z": [-0.25013575323121495, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 3 / index 1  |  offset=10 cm from TOP"}}, "name": "T3_I1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.491505891084671, -0.0307830236852169], "y": [0.374126225709915, 0.793533623218536], "z": [-0.239616990089417, 0.197775602340698], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0307830236852169], "y": [0.793533623218536], "z": [0.197775602340698], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.4262198050710192], "y": [0.4265521276469177], "z": [-0.18494293976286966], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.4262198050710192, 0.154346406459808], "y": [0.4265521276469177, 0.100275993347168], "z": [-0.18494293976286966, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 3 / index 2  |  offset=10 cm from TOP"}}, "name": "T3_I2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.587895452976227, -0.100576154887676], "y": [0.599732637405396, 0.79658305644989], "z": [-0.169413059949875, 0.187317460775375], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.100576154887676], "y": [0.79658305644989], "z": [0.187317460775375], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.5018364957223385], "y": [0.6243389415789575], "z": [-0.12482174160996104], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.5018364957223385, 0.154346406459808], "y": [0.6243389415789575, 0.100275993347168], "z": [-0.12482174160996104, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 3 / index 3  |  offset=10 cm from TOP"}}, "name": "T3_I3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.637588262557983, -0.143848299980164], "y": [0.727042198181152, 0.706652402877808], "z": [-0.0253991298377514, 0.14472122490406], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.143848299980164], "y": [0.706652402877808], "z": [0.14472122490406], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.5399086754613005], "y": [0.7244934733304137], "z": [-0.004134081842111847], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [-0.380584537982941], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.5399086754613005, 0.154346406459808], "y": [0.7244934733304137, 0.100275993347168], "z": [-0.004134081842111847, -0.380584537982941], "type": "scatter3d"}], "layout": {"title": {"text": "Z7 (Z7) / trial 3 / index 4  |  offset=10 cm from TOP"}}, "name": "T3_I4", "traces": [8, 9, 10, 11, 12]}]};
    const trialInfo = {"1": [{"name": "T1_I-6", "index": -6}, {"name": "T1_I-5", "index": -5}, {"name": "T1_I-4", "index": -4}, {"name": "T1_I-3", "index": -3}, {"name": "T1_I-2", "index": -2}, {"name": "T1_I-1", "index": -1}, {"name": "T1_I0", "index": 0}, {"name": "T1_I1", "index": 1}, {"name": "T1_I2", "index": 2}, {"name": "T1_I3", "index": 3}, {"name": "T1_I4", "index": 4}], "2": [{"name": "T2_I-6", "index": -6}, {"name": "T2_I-5", "index": -5}, {"name": "T2_I-4", "index": -4}, {"name": "T2_I-3", "index": -3}, {"name": "T2_I-2", "index": -2}, {"name": "T2_I-1", "index": -1}, {"name": "T2_I0", "index": 0}, {"name": "T2_I1", "index": 1}, {"name": "T2_I2", "index": 2}, {"name": "T2_I3", "index": 3}, {"name": "T2_I4", "index": 4}], "3": [{"name": "T3_I-6", "index": -6}, {"name": "T3_I-5", "index": -5}, {"name": "T3_I-4", "index": -4}, {"name": "T3_I-3", "index": -3}, {"name": "T3_I-2", "index": -2}, {"name": "T3_I-1", "index": -1}, {"name": "T3_I0", "index": 0}, {"name": "T3_I1", "index": 1}, {"name": "T3_I2", "index": 2}, {"name": "T3_I3", "index": 3}, {"name": "T3_I4", "index": 4}]};  // { trial: [{name, index}, ...], ... }
    let currentTrial = "1";  // 文字列として扱う

    document.addEventListener("DOMContentLoaded", function() {
      const plotDiv = document.getElementById("plot");
      const slider = document.getElementById("frameSlider");
      const frameLabel = document.getElementById("frameLabel");

      // Plot を生成
      Plotly.newPlot(plotDiv, fig.data, fig.layout, {responsive: true}).then(function(gd) {
        // frames を追加
        Plotly.addFrames(gd, fig.frames);

        // Trial ボタンにイベントを付与
        Object.keys(trialInfo).forEach(function(trialKey) {
          const btn = document.getElementById("trialBtn_" + trialKey);
          if (!btn) return;
          btn.addEventListener("click", function() {
            // active クラス切り替え
            document.querySelectorAll(".trial-btn").forEach(b => b.classList.remove("active"));
            btn.classList.add("active");

            currentTrial = trialKey;
            updateSliderForTrial(gd, currentTrial);
          });
        });

        // スライダー操作でフレーム更新
        slider.addEventListener("input", function(e) {
          const idxInTrial = parseInt(slider.value);
          updateFrameForCurrentTrial(gd, idxInTrial);
        });

        // 初期 Trial ボタンを active に
        const initBtn = document.getElementById("trialBtn_1");
        if (initBtn) {
          initBtn.classList.add("active");
        }

        // 初期表示
        updateSliderForTrial(gd, currentTrial);

        // ===== 関数群 =====
        function updateSliderForTrial(gd, trialKey) {
          const framesForTrial = trialInfo[trialKey];
          if (!framesForTrial || framesForTrial.length === 0) return;

          slider.min = 0;
          slider.max = framesForTrial.length - 1;
          slider.value = 0;

          updateFrame(gd, trialKey, 0);
        }

        function updateFrameForCurrentTrial(gd, idxInTrial) {
          updateFrame(gd, currentTrial, idxInTrial);
        }

        function updateFrame(gd, trialKey, idxInTrial) {
          const framesForTrial = trialInfo[trialKey];
          if (!framesForTrial || framesForTrial.length === 0) return;

          const clampedIdx = Math.max(0, Math.min(idxInTrial, framesForTrial.length - 1));
          const frameInfo = framesForTrial[clampedIdx];
          const frameName = frameInfo.name;
          const indexValue = frameInfo.index;

          Plotly.animate(gd, [frameName], {
            mode: "immediate",
            frame: {duration: 0, redraw: true},
            transition: {duration: 0}
          });

          frameLabel.textContent = "Trial " + trialKey + " / frame index = " + indexValue + " (step " + clampedIdx + ")";
        }
      });
    });
  </script>
</body>
</html>

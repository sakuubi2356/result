<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Momo_vanish_Z3_SWEmin</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f4f4;
    }
    .page-wrapper {
      padding: 10px 20px 20px 20px;
    }
    .top-row {
      display: flex;
      flex-direction: row;
      align-items: stretch;
    }
    #plotArea {
      flex: 1 1 auto;
      min-width: 0;
      height: 80vh;
    }
    #plot {
      width: 100%;
      height: 100%;
    }
    #trialPanel {
      width: 120px;
      padding-left: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: flex-start;
      justify-content: flex-start;
    }
    .trial-btn {
      width: 100%;
      padding: 6px 4px;
      margin: 0;
      border-radius: 6px;
      border: 1px solid #1976d2;
      background: #fff;
      color: #1976d2;
      cursor: pointer;
      font-size: 13px;
    }
    .trial-btn.active {
      background: #1976d2;
      color: #fff;
    }
    #bottomPanel {
      margin-top: 10px;
      padding: 8px 10px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    #frameSlider {
      width: 100%;
    }
    #frameLabel {
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="page-wrapper">
    <div class="top-row">
      <div id="plotArea">
        <div id="plot"></div>
      </div>
      <div id="trialPanel">
        <div style="font-weight:bold; margin-bottom:4px;">Trial</div>
        <button class="trial-btn" id="trialBtn_1" data-trial="1">1球目</button>
          <button class="trial-btn" id="trialBtn_2" data-trial="2">2球目</button>
          <button class="trial-btn" id="trialBtn_3" data-trial="3">3球目</button>
      </div>
    </div>
    <div id="bottomPanel">
      <div id="frameLabel">Frame:</div>
      <input type="range" id="frameSlider" min="0" max="0" value="0" step="1">
    </div>
  </div>

  <script>
    // Python から渡された Figure & Trial 情報
    const fig = {"data": [{"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 3}, "mode": "lines", "name": "SZ Bottom", "showlegend": true, "x": [0.3002845, 0.3002845, 0.150155, 2.548099e-05, 0.150155, 0.3002845], "y": [0.150414, -0.150414, -0.150414, -0.0, 0.150414, 0.150414], "z": [-0.4695162, -0.4695162, -0.4695162, -0.4695162, -0.4695162, -0.4695162], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 3}, "mode": "lines", "name": "SZ Top", "showlegend": true, "x": [0.3002845, 0.3002845, 0.150155, 2.548099e-05, 0.150155, 0.3002845], "y": [0.150414, -0.150414, -0.150414, -0.0, 0.150414, 0.150414], "z": [0.06407398, 0.06407398, 0.06407398, 0.06407398, 0.06407398, 0.06407398], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "name": "SZ Side", "opacity": 0.3, "showlegend": true, "x": [0.3002845, 0.3002845], "y": [0.150414, 0.150414], "z": [-0.4695162, 0.06407398], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "opacity": 0.3, "showlegend": false, "x": [0.3002845, 0.3002845], "y": [-0.150414, -0.150414], "z": [-0.4695162, 0.06407398], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "opacity": 0.3, "showlegend": false, "x": [0.150155, 0.150155], "y": [-0.150414, -0.150414], "z": [-0.4695162, 0.06407398], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "opacity": 0.3, "showlegend": false, "x": [2.548099e-05, 2.548099e-05], "y": [-0.0, -0.0], "z": [-0.4695162, 0.06407398], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "opacity": 0.3, "showlegend": false, "x": [0.150155, 0.150155], "y": [0.150414, 0.150414], "z": [-0.4695162, 0.06407398], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "marker": {"color": "white", "line": {"color": "blue", "width": 1}, "size": 5}, "mode": "markers+text", "name": "NineGrid", "showlegend": false, "text": ["Z1", "Z2", "Z3", "Z4", "Z5", "Z6", "Z7", "Z8", "Z9"], "textposition": "top center", "x": [0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845], "y": [0.100276, -0.0, -0.100276, 0.100276, -0.0, -0.100276, 0.100276, -0.0, -0.100276], "z": [-0.0248577, -0.0248577, -0.0248577, -0.2027211, -0.2027211, -0.2027211, -0.3805845, -0.3805845, -0.3805845], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "name": "Bat", "showlegend": true, "x": [0.0900342836976051, 0.204726904630661], "y": [-0.124833486974239, 0.560978889465332], "z": [-0.11738882958889, 0.278220802545547], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "name": "BOTTOM", "showlegend": true, "x": [0.204726904630661], "y": [0.560978889465332], "z": [0.278220802545547], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "name": "Sweet Spot", "showlegend": true, "x": [0.10437086138130842], "y": [-0.03910693951823503], "z": [-0.06793762534073604], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "name": "Ball", "showlegend": true, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "name": "S\u2192P", "showlegend": true, "x": [0.10437086138130842, 0.154346406459808], "y": [-0.03910693951823503, -0.100275993347168], "z": [-0.06793762534073604, -0.0248576998710632], "type": "scatter3d"}], "layout": {"template": {"data": {"histogram2dcontour": [{"type": "histogram2dcontour", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "choropleth": [{"type": "choropleth", "colorbar": {"outlinewidth": 0, "ticks": ""}}], "histogram2d": [{"type": "histogram2d", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "heatmap": [{"type": "heatmap", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "heatmapgl": [{"type": "heatmapgl", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "contourcarpet": [{"type": "contourcarpet", "colorbar": {"outlinewidth": 0, "ticks": ""}}], "contour": [{"type": "contour", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "surface": [{"type": "surface", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "mesh3d": [{"type": "mesh3d", "colorbar": {"outlinewidth": 0, "ticks": ""}}], "scatter": [{"fillpattern": {"fillmode": "overlay", "size": 10, "solidity": 0.2}, "type": "scatter"}], "parcoords": [{"type": "parcoords", "line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scatterpolargl": [{"type": "scatterpolargl", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "bar": [{"error_x": {"color": "#2a3f5f"}, "error_y": {"color": "#2a3f5f"}, "marker": {"line": {"color": "#E5ECF6", "width": 0.5}, "pattern": {"fillmode": "overlay", "size": 10, "solidity": 0.2}}, "type": "bar"}], "scattergeo": [{"type": "scattergeo", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scatterpolar": [{"type": "scatterpolar", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "histogram": [{"marker": {"pattern": {"fillmode": "overlay", "size": 10, "solidity": 0.2}}, "type": "histogram"}], "scattergl": [{"type": "scattergl", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scatter3d": [{"type": "scatter3d", "line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scattermapbox": [{"type": "scattermapbox", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scatterternary": [{"type": "scatterternary", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scattercarpet": [{"type": "scattercarpet", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "carpet": [{"aaxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "baxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "type": "carpet"}], "table": [{"cells": {"fill": {"color": "#EBF0F8"}, "line": {"color": "white"}}, "header": {"fill": {"color": "#C8D4E3"}, "line": {"color": "white"}}, "type": "table"}], "barpolar": [{"marker": {"line": {"color": "#E5ECF6", "width": 0.5}, "pattern": {"fillmode": "overlay", "size": 10, "solidity": 0.2}}, "type": "barpolar"}], "pie": [{"automargin": true, "type": "pie"}]}, "layout": {"autotypenumbers": "strict", "colorway": ["#636efa", "#EF553B", "#00cc96", "#ab63fa", "#FFA15A", "#19d3f3", "#FF6692", "#B6E880", "#FF97FF", "#FECB52"], "font": {"color": "#2a3f5f"}, "hovermode": "closest", "hoverlabel": {"align": "left"}, "paper_bgcolor": "white", "plot_bgcolor": "#E5ECF6", "polar": {"bgcolor": "#E5ECF6", "angularaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "radialaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "ternary": {"bgcolor": "#E5ECF6", "aaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "baxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "caxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "coloraxis": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "colorscale": {"sequential": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "sequentialminus": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "diverging": [[0, "#8e0152"], [0.1, "#c51b7d"], [0.2, "#de77ae"], [0.3, "#f1b6da"], [0.4, "#fde0ef"], [0.5, "#f7f7f7"], [0.6, "#e6f5d0"], [0.7, "#b8e186"], [0.8, "#7fbc41"], [0.9, "#4d9221"], [1, "#276419"]]}, "xaxis": {"gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "automargin": true, "zerolinewidth": 2}, "yaxis": {"gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "automargin": true, "zerolinewidth": 2}, "scene": {"xaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white", "gridwidth": 2}, "yaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white", "gridwidth": 2}, "zaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white", "gridwidth": 2}}, "shapedefaults": {"line": {"color": "#2a3f5f"}}, "annotationdefaults": {"arrowcolor": "#2a3f5f", "arrowhead": 0, "arrowwidth": 1}, "geo": {"bgcolor": "white", "landcolor": "#E5ECF6", "subunitcolor": "white", "showland": true, "showlakes": true, "lakecolor": "white"}, "title": {"x": 0.05}, "mapbox": {"style": "light"}}}, "scene": {"camera": {"eye": {"x": 1.6, "y": 1.6, "z": 1.0}, "center": {"x": 0, "y": 0, "z": 0}, "up": {"x": 0, "y": 0, "z": 1}}, "xaxis": {"title": {"text": "\u6a2a Z [m]"}}, "yaxis": {"title": {"text": "\u5965\u884c X [m]"}}, "zaxis": {"title": {"text": "\u7e26 Y [m]"}}, "aspectmode": "data"}, "margin": {"l": 0, "r": 0, "t": 60, "b": 100}, "legend": {"itemsizing": "constant", "groupclick": "togglegroup"}, "title": {"text": "Z3 (Z3) / trial 1 / index -1 (MIN=-1)  |  offset=10 cm from TOP"}, "uirevision": "keep_camera"}, "frames": [{"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.761733829975128, -0.0880566909909248], "y": [0.517701506614685, 0.0863778442144394], "z": [0.0738719254732132, 0.0847860276699066], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0880566909909248], "y": [0.0863778442144394], "z": [0.0847860276699066], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.6775241946390713], "y": [0.4637860533200931], "z": [0.07523618813379541], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.6775241946390713, 0.154346406459808], "y": [0.4637860533200931, -0.100275993347168], "z": [0.07523618813379541, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 1 / index -6  |  offset=10 cm from TOP"}}, "name": "T1_I-6", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.706100940704346, 0.0587104447185993], "y": [0.335875600576401, 0.166761249303818], "z": [-0.0182140432298183, 0.144463494420052], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0587104447185993], "y": [0.166761249303818], "z": [0.144463494420052], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.6104995250203392], "y": [0.31473630832436345], "z": [0.0021206473824500575], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.6104995250203392, 0.154346406459808], "y": [0.31473630832436345, -0.100275993347168], "z": [0.0021206473824500575, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 1 / index -5  |  offset=10 cm from TOP"}}, "name": "T1_I-5", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.596912086009979, 0.154829502105713], "y": [0.169531419873238, 0.232421442866325], "z": [-0.0836177244782448, 0.182708442211151], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.154829502105713], "y": [0.232421442866325], "z": [0.182708442211151], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.5029444019840296], "y": [0.17739267153527802], "z": [-0.05032695877504413], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.5029444019840296, 0.154346406459808], "y": [0.17739267153527802, -0.100275993347168], "z": [-0.05032695877504413, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 1 / index -4  |  offset=10 cm from TOP"}}, "name": "T1_I-4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.425047814846039, 0.197989404201508], "y": [0.019246332347393, 0.367899656295776], "z": [-0.133788332343102, 0.227134749293327], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.197989404201508], "y": [0.367899656295776], "z": [0.227134749293327], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.3471681617031341], "y": [0.06282799826733662], "z": [-0.08867294669714697], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.3471681617031341, 0.154346406459808], "y": [0.06282799826733662, -0.100275993347168], "z": [-0.08867294669714697, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 1 / index -3  |  offset=10 cm from TOP"}}, "name": "T1_I-3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.183998107910156, 0.219774842262268], "y": [-0.100490540266037, 0.46892574429512], "z": [-0.133713886141777, 0.257096618413925], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.219774842262268], "y": [0.46892574429512], "z": [0.257096618413925], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.133526502974345], "y": [-0.029313524207592714], "z": [-0.08486258646388325], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.133526502974345, 0.154346406459808], "y": [-0.029313524207592714, -0.100275993347168], "z": [-0.08486258646388325, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 1 / index -2  |  offset=10 cm from TOP"}}, "name": "T1_I-2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.0900342836976051, 0.204726904630661], "y": [-0.124833486974239, 0.560978889465332], "z": [-0.11738882958889, 0.278220802545547], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.204726904630661], "y": [0.560978889465332], "z": [0.278220802545547], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.10437086138130842], "y": [-0.03910693951823503], "z": [-0.06793762534073604], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.10437086138130842, 0.154346406459808], "y": [-0.03910693951823503, -0.100275993347168], "z": [-0.06793762534073604, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 1 / index -1 (MIN)  |  offset=10 cm from TOP"}}, "name": "T1_I-1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.0900342836976051, 0.204726904630661], "y": [-0.124833486974239, 0.560978889465332], "z": [-0.11738882958889, 0.278220802545547], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.204726904630661], "y": [0.560978889465332], "z": [0.278220802545547], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.10437086138130842], "y": [-0.03910693951823503], "z": [-0.06793762534073604], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.10437086138130842, 0.154346406459808], "y": [-0.03910693951823503, -0.100275993347168], "z": [-0.06793762534073604, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 1 / index 0  |  offset=10 cm from TOP"}}, "name": "T1_I0", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.343113124370575, 0.108370169997215], "y": [-0.108230918645859, 0.591484665870667], "z": [-0.0433844327926636, 0.265311926603317], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.108370169997215], "y": [0.591484665870667], "z": [0.265311926603317], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.3137702458159404], "y": [-0.020766442985397426], "z": [-0.0047973756935728515], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.3137702458159404, 0.154346406459808], "y": [-0.020766442985397426, -0.100275993347168], "z": [-0.0047973756935728515, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 1 / index 1  |  offset=10 cm from TOP"}}, "name": "T1_I1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.586320161819458, 0.0656672492623329], "y": [0.0428188294172287, 0.601920902729034], "z": [0.0220388472080231, 0.259368419647217], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0656672492623329], "y": [0.601920902729034], "z": [0.259368419647217], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.5212385431580012], "y": [0.11270659351211677], "z": [0.051705045856013016], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.5212385431580012, 0.154346406459808], "y": [0.11270659351211677, -0.100275993347168], "z": [0.051705045856013016, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 1 / index 2  |  offset=10 cm from TOP"}}, "name": "T1_I2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.731941699981689, 0.0345006920397282], "y": [0.167544275522232, 0.533536911010742], "z": [0.0940055102109909, 0.23409615457058], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0345006920397282], "y": [0.533536911010742], "z": [0.23409615457058], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.6447615710893878], "y": [0.21329335647988132], "z": [0.11151684133835536], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.6447615710893878, 0.154346406459808], "y": [0.21329335647988132, -0.100275993347168], "z": [0.11151684133835536, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 1 / index 3  |  offset=10 cm from TOP"}}, "name": "T1_I3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.817409038543701, 0.0309014953672886], "y": [0.397170633077621, 0.490153282880783], "z": [0.108601555228233, 0.221562191843987], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0309014953672886], "y": [0.490153282880783], "z": [0.221562191843987], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.7190955951906017], "y": [0.4087934643569312], "z": [0.12272163487070123], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.7190955951906017, 0.154346406459808], "y": [0.4087934643569312, -0.100275993347168], "z": [0.12272163487070123, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 1 / index 4  |  offset=10 cm from TOP"}}, "name": "T1_I4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.794403314590454, -0.0559809766709805], "y": [0.353323936462402, 0.0578893423080444], "z": [-0.00537905748933554, 0.0809389501810074], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0559809766709805], "y": [0.0578893423080444], "z": [0.0809389501810074], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.702100518529313], "y": [0.3163946106642848], "z": [0.005410693916137967], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.702100518529313, 0.154346406459808], "y": [0.3163946106642848, -0.100275993347168], "z": [0.005410693916137967, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 2 / index -6  |  offset=10 cm from TOP"}}, "name": "T2_I-6", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.707086384296417, 0.0656343474984169], "y": [0.178684800863266, 0.119127780199051], "z": [-0.0773620679974556, 0.121020667254925], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0656343474984169], "y": [0.119127780199051], "z": [0.121020667254925], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.6104962986855454], "y": [0.17124017373216377], "z": [-0.052564227596256174], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.6104962986855454, 0.154346406459808], "y": [0.17124017373216377, -0.100275993347168], "z": [-0.052564227596256174, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 2 / index -5  |  offset=10 cm from TOP"}}, "name": "T2_I-5", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.582767724990845, 0.157290294766426], "y": [0.0484395213425159, 0.12758332490921], "z": [-0.157245323061943, 0.136097997426987], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.157290294766426], "y": [0.12758332490921], "z": [0.136097997426987], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.49026046658955746], "y": [0.058332497422697055], "z": [-0.12057740564965483], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.49026046658955746, 0.154346406459808], "y": [0.058332497422697055, -0.100275993347168], "z": [-0.12057740564965483, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 2 / index -4  |  offset=10 cm from TOP"}}, "name": "T2_I-4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.419928699731827, 0.250178307294846], "y": [-0.0747825801372528, 0.136001989245415], "z": [-0.231499433517456, 0.151288539171219], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.250178307294846], "y": [0.136001989245415], "z": [0.151288539171219], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.3361653348206811], "y": [-0.04843451241418782], "z": [-0.1836509431962035], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.3361653348206811, 0.154346406459808], "y": [-0.04843451241418782, -0.100275993347168], "z": [-0.1836509431962035, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 2 / index -3  |  offset=10 cm from TOP"}}, "name": "T2_I-3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.0931278020143509, 0.266858726739883], "y": [-0.180818647146225, 0.391284734010696], "z": [-0.207933619618416, 0.219977423548698], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.266858726739883], "y": [0.391284734010696], "z": [0.219977423548698], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.04812950140511173], "y": [-0.10930574911098569], "z": [-0.1544447576293812], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.04812950140511173, 0.154346406459808], "y": [-0.10930574911098569, -0.100275993347168], "z": [-0.1544447576293812, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 2 / index -2  |  offset=10 cm from TOP"}}, "name": "T2_I-2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.195843890309334, 0.282183825969696], "y": [-0.16872563958168, 0.48834040760994], "z": [-0.207724213600159, 0.240394055843353], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.282183825969696], "y": [0.48834040760994], "z": [0.240394055843353], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.20663637924607126], "y": [-0.08659240667174581], "z": [-0.15170944559820337], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.20663637924607126, 0.154346406459808], "y": [-0.08659240667174581, -0.100275993347168], "z": [-0.15170944559820337, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 2 / index -1 (MIN)  |  offset=10 cm from TOP"}}, "name": "T2_I-1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.195843890309334, 0.282183825969696], "y": [-0.16872563958168, 0.48834040760994], "z": [-0.207724213600159, 0.240394055843353], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.282183825969696], "y": [0.48834040760994], "z": [0.240394055843353], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.20663637924607126], "y": [-0.08659240667174581], "z": [-0.15170944559820337], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.20663637924607126, 0.154346406459808], "y": [-0.08659240667174581, -0.100275993347168], "z": [-0.15170944559820337, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 2 / index 0  |  offset=10 cm from TOP"}}, "name": "T2_I0", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.450809717178345, 0.209230050444603], "y": [-0.0860289484262466, 0.577139139175415], "z": [-0.137627631425858, 0.238998621702194], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.209230050444603], "y": [0.577139139175415], "z": [0.238998621702194], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.4206122584199426], "y": [-0.0031329363321844356], "z": [-0.09054934913523396], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.4206122584199426, 0.154346406459808], "y": [-0.0031329363321844356, -0.100275993347168], "z": [-0.09054934913523396, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 2 / index 1  |  offset=10 cm from TOP"}}, "name": "T2_I1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.671766459941864, 0.170535922050476], "y": [0.0998789072036743, 0.624943017959595], "z": [-0.0994882732629776, 0.236779287457466], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.170535922050476], "y": [0.624943017959595], "z": [0.236779287457466], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.6091126546934458], "y": [0.16551190849012798], "z": [-0.0574548362154834], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.6091126546934458, 0.154346406459808], "y": [0.16551190849012798, -0.100275993347168], "z": [-0.0574548362154834, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 2 / index 2  |  offset=10 cm from TOP"}}, "name": "T2_I2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.807807147502899, 0.127638563513756], "y": [0.337125241756439, 0.643921554088593], "z": [-0.0622157491743565, 0.226310163736343], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.127638563513756], "y": [0.643921554088593], "z": [0.226310163736343], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.7227861065417297], "y": [0.3754747663471603], "z": [-0.02615002365073999], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.7227861065417297, 0.154346406459808], "y": [0.3754747663471603, -0.100275993347168], "z": [-0.02615002365073999, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 2 / index 3  |  offset=10 cm from TOP"}}, "name": "T2_I3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.857970595359802, 0.0689336881041527], "y": [0.498692274093628, 0.575399875640869], "z": [0.0781850591301918, 0.185596600174904], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0689336881041527], "y": [0.575399875640869], "z": [0.185596600174904], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.759341023276801], "y": [0.5082807202696527], "z": [0.0916114961353536], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.759341023276801, 0.154346406459808], "y": [0.5082807202696527, -0.100275993347168], "z": [0.0916114961353536, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 2 / index 4  |  offset=10 cm from TOP"}}, "name": "T2_I4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.772828578948975, 0.00475187599658966], "y": [0.18213863670826, 0.115922376513481], "z": [-0.0290837660431862, 0.146939098834991], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.00475187599658966], "y": [0.115922376513481], "z": [0.146939098834991], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.6756310225354404], "y": [0.17386160422263008], "z": [-0.007080908036336805], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.6756310225354404, 0.154346406459808], "y": [0.17386160422263008, -0.100275993347168], "z": [-0.007080908036336805, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 3 / index -4  |  offset=10 cm from TOP"}}, "name": "T3_I-4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.629570424556732, 0.0992993861436844], "y": [0.0245140194892883, 0.213800519704819], "z": [-0.0846282988786697, 0.185408294200897], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0992993861436844], "y": [0.213800519704819], "z": [0.185408294200897], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.5384617225420913], "y": [0.04817482569960257], "z": [-0.050873733755039785], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.5384617225420913, 0.154346406459808], "y": [0.04817482569960257, -0.100275993347168], "z": [-0.050873733755039785, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 3 / index -3  |  offset=10 cm from TOP"}}, "name": "T3_I-3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.43108469247818, 0.172418281435966], "y": [-0.0964801609516144, 0.298884332180023], "z": [-0.131801813840866, 0.213844016194344], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.172418281435966], "y": [0.298884332180023], "z": [0.213844016194344], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.35564681848598223], "y": [-0.04705959783422941], "z": [-0.08859608379613858], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.35564681848598223, 0.154346406459808], "y": [-0.04705959783422941, -0.100275993347168], "z": [-0.08859608379613858, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 3 / index -2  |  offset=10 cm from TOP"}}, "name": "T3_I-2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.189873248338699, 0.257105559110641], "y": [-0.16358557343483, 0.345670640468597], "z": [-0.189382508397102, 0.23590399324894], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.257105559110641], "y": [0.345670640468597], "z": [0.23590399324894], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.1340009215980794], "y": [-0.09992857425791037], "z": [-0.1362217187079044], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.1340009215980794, 0.154346406459808], "y": [-0.09992857425791037, -0.100275993347168], "z": [-0.1362217187079044, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 3 / index -1  |  offset=10 cm from TOP"}}, "name": "T3_I-1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.189873248338699, 0.257105559110641], "y": [-0.16358557343483, 0.345670640468597], "z": [-0.189382508397102, 0.23590399324894], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.257105559110641], "y": [0.345670640468597], "z": [0.23590399324894], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.1340009215980794], "y": [-0.09992857425791037], "z": [-0.1362217187079044], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.1340009215980794, 0.154346406459808], "y": [-0.09992857425791037, -0.100275993347168], "z": [-0.1362217187079044, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 3 / index 0  |  offset=10 cm from TOP"}}, "name": "T3_I0", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.092507541179657, 0.184050738811493], "y": [-0.170192897319794, 0.528395056724548], "z": [-0.130932718515396, 0.248007014393806], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.184050738811493], "y": [0.528395056724548], "z": [0.248007014393806], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.10395043545053534], "y": [-0.08286944452554085], "z": [-0.08356527439187017], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.10395043545053534, 0.154346406459808], "y": [-0.08286944452554085, -0.100275993347168], "z": [-0.08356527439187017, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 3 / index 1 (MIN)  |  offset=10 cm from TOP"}}, "name": "T3_I1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.342079162597656, 0.106302931904793], "y": [-0.10957333445549, 0.598935127258301], "z": [-0.0489696078002453, 0.23812934756279], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.106302931904793], "y": [0.598935127258301], "z": [0.23812934756279], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.31260714484644636], "y": [-0.021009810052929692], "z": [-0.01308225187828451], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.31260714484644636, 0.154346406459808], "y": [-0.021009810052929692, -0.100275993347168], "z": [-0.01308225187828451, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 3 / index 2  |  offset=10 cm from TOP"}}, "name": "T3_I2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.569632232189178, 0.0697168633341789], "y": [0.0612208545207977, 0.639549791812897], "z": [-0.00383254513144493, 0.232007473707199], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0697168633341789], "y": [0.639549791812897], "z": [0.232007473707199], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.5071428232976462], "y": [0.13351195755094547], "z": [0.025647451460676686], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.5071428232976462, 0.154346406459808], "y": [0.13351195755094547, -0.100275993347168], "z": [0.025647451460676686, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 3 / index 3  |  offset=10 cm from TOP"}}, "name": "T3_I3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.726339995861053, 0.0342665426433086], "y": [0.291300445795059, 0.652542233467102], "z": [0.0462222918868065, 0.220975369215012], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0342665426433086], "y": [0.652542233467102], "z": [0.220975369215012], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.6398308096025521], "y": [0.3364556716584072], "z": [0.06806642771594876], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.6398308096025521, 0.154346406459808], "y": [0.3364556716584072, -0.100275993347168], "z": [0.06806642771594876, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 3 / index 4  |  offset=10 cm from TOP"}}, "name": "T3_I4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.790028095245361, 0.00253868103027344], "y": [0.536428570747375, 0.638833045959473], "z": [0.109561651945114, 0.206379890441895], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.00253868103027344], "y": [0.638833045959473], "z": [0.206379890441895], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.6915919204179655], "y": [0.5492291298953772], "z": [0.12166393151753065], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.6915919204179655, 0.154346406459808], "y": [0.5492291298953772, -0.100275993347168], "z": [0.12166393151753065, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 3 / index 5  |  offset=10 cm from TOP"}}, "name": "T3_I5", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.774682998657227, -0.00712066888809204], "y": [0.723812997341156, 0.556187331676483], "z": [0.197518482804298, 0.171352699398994], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.00712066888809204], "y": [0.556187331676483], "z": [0.171352699398994], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.6769575391908498], "y": [0.7028597889136861], "z": [0.19424775984438963], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [-0.100275993347168], "z": [-0.0248576998710632], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.6769575391908498, 0.154346406459808], "y": [0.7028597889136861, -0.100275993347168], "z": [0.19424775984438963, -0.0248576998710632], "type": "scatter3d"}], "layout": {"title": {"text": "Z3 (Z3) / trial 3 / index 6  |  offset=10 cm from TOP"}}, "name": "T3_I6", "traces": [8, 9, 10, 11, 12]}]};
    const trialInfo = {"1": [{"name": "T1_I-6", "index": -6}, {"name": "T1_I-5", "index": -5}, {"name": "T1_I-4", "index": -4}, {"name": "T1_I-3", "index": -3}, {"name": "T1_I-2", "index": -2}, {"name": "T1_I-1", "index": -1}, {"name": "T1_I0", "index": 0}, {"name": "T1_I1", "index": 1}, {"name": "T1_I2", "index": 2}, {"name": "T1_I3", "index": 3}, {"name": "T1_I4", "index": 4}], "2": [{"name": "T2_I-6", "index": -6}, {"name": "T2_I-5", "index": -5}, {"name": "T2_I-4", "index": -4}, {"name": "T2_I-3", "index": -3}, {"name": "T2_I-2", "index": -2}, {"name": "T2_I-1", "index": -1}, {"name": "T2_I0", "index": 0}, {"name": "T2_I1", "index": 1}, {"name": "T2_I2", "index": 2}, {"name": "T2_I3", "index": 3}, {"name": "T2_I4", "index": 4}], "3": [{"name": "T3_I-4", "index": -4}, {"name": "T3_I-3", "index": -3}, {"name": "T3_I-2", "index": -2}, {"name": "T3_I-1", "index": -1}, {"name": "T3_I0", "index": 0}, {"name": "T3_I1", "index": 1}, {"name": "T3_I2", "index": 2}, {"name": "T3_I3", "index": 3}, {"name": "T3_I4", "index": 4}, {"name": "T3_I5", "index": 5}, {"name": "T3_I6", "index": 6}]};  // { trial: [{name, index}, ...], ... }
    let currentTrial = "1";  // 文字列として扱う

    document.addEventListener("DOMContentLoaded", function() {
      const plotDiv = document.getElementById("plot");
      const slider = document.getElementById("frameSlider");
      const frameLabel = document.getElementById("frameLabel");

      // Plot を生成
      Plotly.newPlot(plotDiv, fig.data, fig.layout, {responsive: true}).then(function(gd) {
        // frames を追加
        Plotly.addFrames(gd, fig.frames);

        // Trial ボタンにイベントを付与
        Object.keys(trialInfo).forEach(function(trialKey) {
          const btn = document.getElementById("trialBtn_" + trialKey);
          if (!btn) return;
          btn.addEventListener("click", function() {
            // active クラス切り替え
            document.querySelectorAll(".trial-btn").forEach(b => b.classList.remove("active"));
            btn.classList.add("active");

            currentTrial = trialKey;
            updateSliderForTrial(gd, currentTrial);
          });
        });

        // スライダー操作でフレーム更新
        slider.addEventListener("input", function(e) {
          const idxInTrial = parseInt(slider.value);
          updateFrameForCurrentTrial(gd, idxInTrial);
        });

        // 初期 Trial ボタンを active に
        const initBtn = document.getElementById("trialBtn_1");
        if (initBtn) {
          initBtn.classList.add("active");
        }

        // 初期表示
        updateSliderForTrial(gd, currentTrial);

        // ===== 関数群 =====
        function updateSliderForTrial(gd, trialKey) {
          const framesForTrial = trialInfo[trialKey];
          if (!framesForTrial || framesForTrial.length === 0) return;

          slider.min = 0;
          slider.max = framesForTrial.length - 1;
          slider.value = 0;

          updateFrame(gd, trialKey, 0);
        }

        function updateFrameForCurrentTrial(gd, idxInTrial) {
          updateFrame(gd, currentTrial, idxInTrial);
        }

        function updateFrame(gd, trialKey, idxInTrial) {
          const framesForTrial = trialInfo[trialKey];
          if (!framesForTrial || framesForTrial.length === 0) return;

          const clampedIdx = Math.max(0, Math.min(idxInTrial, framesForTrial.length - 1));
          const frameInfo = framesForTrial[clampedIdx];
          const frameName = frameInfo.name;
          const indexValue = frameInfo.index;

          Plotly.animate(gd, [frameName], {
            mode: "immediate",
            frame: {duration: 0, redraw: true},
            transition: {duration: 0}
          });

          frameLabel.textContent = "Trial " + trialKey + " / frame index = " + indexValue + " (step " + clampedIdx + ")";
        }
      });
    });
  </script>
</body>
</html>

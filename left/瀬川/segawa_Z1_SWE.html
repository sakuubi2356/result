<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>segawa_vanish_Z1_SWEmin</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f4f4;
    }
    .page-wrapper {
      padding: 10px 20px 20px 20px;
    }
    .top-row {
      display: flex;
      flex-direction: row;
      align-items: stretch;
    }
    #plotArea {
      flex: 1 1 auto;
      min-width: 0;
      height: 80vh;
    }
    #plot {
      width: 100%;
      height: 100%;
    }
    #trialPanel {
      width: 120px;
      padding-left: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: flex-start;
      justify-content: flex-start;
    }
    .trial-btn {
      width: 100%;
      padding: 6px 4px;
      margin: 0;
      border-radius: 6px;
      border: 1px solid #1976d2;
      background: #fff;
      color: #1976d2;
      cursor: pointer;
      font-size: 13px;
    }
    .trial-btn.active {
      background: #1976d2;
      color: #fff;
    }
    #bottomPanel {
      margin-top: 10px;
      padding: 8px 10px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    #frameSlider {
      width: 100%;
    }
    #frameLabel {
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="page-wrapper">
    <div class="top-row">
      <div id="plotArea">
        <div id="plot"></div>
      </div>
      <div id="trialPanel">
        <div style="font-weight:bold; margin-bottom:4px;">Trial</div>
        <button class="trial-btn" id="trialBtn_1" data-trial="1">1球目</button>
          <button class="trial-btn" id="trialBtn_2" data-trial="2">2球目</button>
          <button class="trial-btn" id="trialBtn_3" data-trial="3">3球目</button>
      </div>
    </div>
    <div id="bottomPanel">
      <div id="frameLabel">Frame:</div>
      <input type="range" id="frameSlider" min="0" max="0" value="0" step="1">
    </div>
  </div>

  <script>
    // Python から渡された Figure & Trial 情報
    const fig = {"data": [{"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 3}, "mode": "lines", "name": "SZ Bottom", "showlegend": true, "x": [0.3002845, 0.3002845, 0.150155, 2.548099e-05, 0.150155, 0.3002845], "y": [0.150414, -0.150414, -0.150414, -0.0, 0.150414, 0.150414], "z": [-0.3406982, -0.3406982, -0.3406982, -0.3406982, -0.3406982, -0.3406982], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 3}, "mode": "lines", "name": "SZ Top", "showlegend": true, "x": [0.3002845, 0.3002845, 0.150155, 2.548099e-05, 0.150155, 0.3002845], "y": [0.150414, -0.150414, -0.150414, -0.0, 0.150414, 0.150414], "z": [0.0893752, 0.0893752, 0.0893752, 0.0893752, 0.0893752, 0.0893752], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "name": "SZ Side", "opacity": 0.3, "showlegend": true, "x": [0.3002845, 0.3002845], "y": [0.150414, 0.150414], "z": [-0.3406982, 0.0893752], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "opacity": 0.3, "showlegend": false, "x": [0.3002845, 0.3002845], "y": [-0.150414, -0.150414], "z": [-0.3406982, 0.0893752], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "opacity": 0.3, "showlegend": false, "x": [0.150155, 0.150155], "y": [-0.150414, -0.150414], "z": [-0.3406982, 0.0893752], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "opacity": 0.3, "showlegend": false, "x": [2.548099e-05, 2.548099e-05], "y": [-0.0, -0.0], "z": [-0.3406982, 0.0893752], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "line": {"color": "blue", "width": 2.5}, "mode": "lines", "opacity": 0.3, "showlegend": false, "x": [0.150155, 0.150155], "y": [0.150414, 0.150414], "z": [-0.3406982, 0.0893752], "type": "scatter3d"}, {"legendgroup": "StrikeZone", "marker": {"color": "white", "line": {"color": "blue", "width": 1}, "size": 5}, "mode": "markers+text", "name": "NineGrid", "showlegend": false, "text": ["Z1", "Z2", "Z3", "Z4", "Z5", "Z6", "Z7", "Z8", "Z9"], "textposition": "top center", "x": [0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845, 0.3002845], "y": [0.100276, -0.0, -0.100276, 0.100276, -0.0, -0.100276, 0.100276, -0.0, -0.100276], "z": [0.01769632, 0.01769632, 0.01769632, -0.1256615, -0.1256615, -0.1256615, -0.2690193, -0.2690193, -0.2690193], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "name": "Bat", "showlegend": true, "x": [0.359905958175659, -0.118792101740837], "y": [0.298803985118866, -0.319251716136932], "z": [-0.169738233089447, 0.000130110420286655], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "name": "BOTTOM", "showlegend": true, "x": [-0.118792101740837], "y": [-0.319251716136932], "z": [0.000130110420286655], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "name": "Sweet Spot", "showlegend": true, "x": [0.30006869771991507], "y": [0.22154701863220022], "z": [-0.14850468909816614], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "name": "Ball", "showlegend": true, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "name": "S\u2192P", "showlegend": true, "x": [0.30006869771991507, 0.154346406459808], "y": [0.22154701863220022, 0.100275993347168], "z": [-0.14850468909816614, 0.0176963210105896], "type": "scatter3d"}], "layout": {"template": {"data": {"histogram2dcontour": [{"type": "histogram2dcontour", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "choropleth": [{"type": "choropleth", "colorbar": {"outlinewidth": 0, "ticks": ""}}], "histogram2d": [{"type": "histogram2d", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "heatmap": [{"type": "heatmap", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "heatmapgl": [{"type": "heatmapgl", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "contourcarpet": [{"type": "contourcarpet", "colorbar": {"outlinewidth": 0, "ticks": ""}}], "contour": [{"type": "contour", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "surface": [{"type": "surface", "colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}], "mesh3d": [{"type": "mesh3d", "colorbar": {"outlinewidth": 0, "ticks": ""}}], "scatter": [{"fillpattern": {"fillmode": "overlay", "size": 10, "solidity": 0.2}, "type": "scatter"}], "parcoords": [{"type": "parcoords", "line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scatterpolargl": [{"type": "scatterpolargl", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "bar": [{"error_x": {"color": "#2a3f5f"}, "error_y": {"color": "#2a3f5f"}, "marker": {"line": {"color": "#E5ECF6", "width": 0.5}, "pattern": {"fillmode": "overlay", "size": 10, "solidity": 0.2}}, "type": "bar"}], "scattergeo": [{"type": "scattergeo", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scatterpolar": [{"type": "scatterpolar", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "histogram": [{"marker": {"pattern": {"fillmode": "overlay", "size": 10, "solidity": 0.2}}, "type": "histogram"}], "scattergl": [{"type": "scattergl", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scatter3d": [{"type": "scatter3d", "line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scattermapbox": [{"type": "scattermapbox", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scatterternary": [{"type": "scatterternary", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "scattercarpet": [{"type": "scattercarpet", "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}}], "carpet": [{"aaxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "baxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "type": "carpet"}], "table": [{"cells": {"fill": {"color": "#EBF0F8"}, "line": {"color": "white"}}, "header": {"fill": {"color": "#C8D4E3"}, "line": {"color": "white"}}, "type": "table"}], "barpolar": [{"marker": {"line": {"color": "#E5ECF6", "width": 0.5}, "pattern": {"fillmode": "overlay", "size": 10, "solidity": 0.2}}, "type": "barpolar"}], "pie": [{"automargin": true, "type": "pie"}]}, "layout": {"autotypenumbers": "strict", "colorway": ["#636efa", "#EF553B", "#00cc96", "#ab63fa", "#FFA15A", "#19d3f3", "#FF6692", "#B6E880", "#FF97FF", "#FECB52"], "font": {"color": "#2a3f5f"}, "hovermode": "closest", "hoverlabel": {"align": "left"}, "paper_bgcolor": "white", "plot_bgcolor": "#E5ECF6", "polar": {"bgcolor": "#E5ECF6", "angularaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "radialaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "ternary": {"bgcolor": "#E5ECF6", "aaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "baxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "caxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "coloraxis": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "colorscale": {"sequential": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "sequentialminus": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "diverging": [[0, "#8e0152"], [0.1, "#c51b7d"], [0.2, "#de77ae"], [0.3, "#f1b6da"], [0.4, "#fde0ef"], [0.5, "#f7f7f7"], [0.6, "#e6f5d0"], [0.7, "#b8e186"], [0.8, "#7fbc41"], [0.9, "#4d9221"], [1, "#276419"]]}, "xaxis": {"gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "automargin": true, "zerolinewidth": 2}, "yaxis": {"gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "automargin": true, "zerolinewidth": 2}, "scene": {"xaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white", "gridwidth": 2}, "yaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white", "gridwidth": 2}, "zaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white", "gridwidth": 2}}, "shapedefaults": {"line": {"color": "#2a3f5f"}}, "annotationdefaults": {"arrowcolor": "#2a3f5f", "arrowhead": 0, "arrowwidth": 1}, "geo": {"bgcolor": "white", "landcolor": "#E5ECF6", "subunitcolor": "white", "showland": true, "showlakes": true, "lakecolor": "white"}, "title": {"x": 0.05}, "mapbox": {"style": "light"}}}, "scene": {"camera": {"eye": {"x": 1.6, "y": 1.6, "z": 1.0}, "center": {"x": 0, "y": 0, "z": 0}, "up": {"x": 0, "y": 0, "z": 1}}, "xaxis": {"title": {"text": "\u6a2a Z [m]"}}, "yaxis": {"title": {"text": "\u5965\u884c X [m]"}}, "zaxis": {"title": {"text": "\u7e26 Y [m]"}}, "aspectmode": "data"}, "margin": {"l": 0, "r": 0, "t": 60, "b": 100}, "legend": {"itemsizing": "constant", "groupclick": "togglegroup"}, "title": {"text": "Z1 (Z1) / trial 1 / index 3 (MIN=3)  |  offset=10 cm from TOP"}, "uirevision": "keep_camera"}, "frames": [{"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.531690835952759, -0.0993921756744385], "y": [0.13527125120163, -0.345389068126678], "z": [-0.0849781706929207, 0.0184619892388582], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0993921756744385], "y": [-0.345389068126678], "z": [0.0184619892388582], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.45280545807128475], "y": [0.0751887101979077], "z": [-0.07204815046737412], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.45280545807128475, 0.154346406459808], "y": [0.0751887101979077, 0.100275993347168], "z": [-0.07204815046737412, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 1 / index -2  |  offset=10 cm from TOP"}}, "name": "T1_I-2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.492854595184326, -0.104267120361328], "y": [0.17930805683136, -0.338789939880371], "z": [-0.108953610062599, 0.0136028416454792], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.104267120361328], "y": [-0.338789939880371], "z": [0.0136028416454792], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.41821437848023024], "y": [0.11454580528071304], "z": [-0.09363405313505227], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.41821437848023024, 0.154346406459808], "y": [0.11454580528071304, 0.100275993347168], "z": [-0.09363405313505227, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 1 / index -1  |  offset=10 cm from TOP"}}, "name": "T1_I-1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.492854595184326, -0.104267120361328], "y": [0.17930805683136, -0.338789939880371], "z": [-0.108953610062599, 0.0136028416454792], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.104267120361328], "y": [-0.338789939880371], "z": [0.0136028416454792], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.41821437848023024], "y": [0.11454580528071304], "z": [-0.09363405313505227], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.41821437848023024, 0.154346406459808], "y": [0.11454580528071304, 0.100275993347168], "z": [-0.09363405313505227, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 1 / index 0  |  offset=10 cm from TOP"}}, "name": "T1_I0", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.451861798763275, -0.107997477054596], "y": [0.221329525113106, -0.333124399185181], "z": [-0.128931984305382, 0.00941021554172039], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.107997477054596], "y": [-0.333124399185181], "z": [0.00941021554172039], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.381879396237678], "y": [0.1520227914603401], "z": [-0.11163921104225577], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.381879396237678, 0.154346406459808], "y": [0.1520227914603401, 0.100275993347168], "z": [-0.11163921104225577, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 1 / index 1  |  offset=10 cm from TOP"}}, "name": "T1_I1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.406114906072617, -0.114797562360764], "y": [0.26213800907135, -0.325072646141052], "z": [-0.150022804737091, 0.00435858126729727], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.114797562360764], "y": [-0.325072646141052], "z": [0.00435858126729727], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.34100083559997263], "y": [0.18873666373442616], "z": [-0.130725127954298], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.34100083559997263, 0.154346406459808], "y": [0.18873666373442616, 0.100275993347168], "z": [-0.130725127954298, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 1 / index 2  |  offset=10 cm from TOP"}}, "name": "T1_I2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.359905958175659, -0.118792101740837], "y": [0.298803985118866, -0.319251716136932], "z": [-0.169738233089447, 0.000130110420286655], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.118792101740837], "y": [-0.319251716136932], "z": [0.000130110420286655], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.30006869771991507], "y": [0.22154701863220022], "z": [-0.14850468909816614], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.30006869771991507, 0.154346406459808], "y": [0.22154701863220022, 0.100275993347168], "z": [-0.14850468909816614, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 1 / index 3 (MIN)  |  offset=10 cm from TOP"}}, "name": "T1_I3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.313158243894577, -0.122219011187553], "y": [0.33334156870842, -0.313793748617172], "z": [-0.181640237569809, -0.00370055437088013], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.122219011187553], "y": [-0.313793748617172], "z": [-0.00370055437088013], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.25873608718065044], "y": [0.2524496542973966], "z": [-0.15939777723996978], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.25873608718065044, 0.154346406459808], "y": [0.2524496542973966, 0.100275993347168], "z": [-0.15939777723996978, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 1 / index 4  |  offset=10 cm from TOP"}}, "name": "T1_I4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.26130947470665, -0.12870554625988], "y": [0.366015166044235, -0.306378215551376], "z": [-0.197238609194756, -0.00809459388256073], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.12870554625988], "y": [-0.306378215551376], "z": [-0.00809459388256073], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.21255759840828642], "y": [0.2819659956247174], "z": [-0.17359560792207612], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.21255759840828642, 0.154346406459808], "y": [0.2819659956247174, 0.100275993347168], "z": [-0.17359560792207612, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 1 / index 5  |  offset=10 cm from TOP"}}, "name": "T1_I5", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.210705131292343, -0.132734373211861], "y": [0.396105140447617, -0.300519853830338], "z": [-0.203371807932854, -0.0116352252662182], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.132734373211861], "y": [-0.300519853830338], "z": [-0.0116352252662182], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.16777519299587032], "y": [0.3090270156893536], "z": [-0.17940473496919485], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.16777519299587032, 0.154346406459808], "y": [0.3090270156893536, 0.100275993347168], "z": [-0.17940473496919485, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 1 / index 6  |  offset=10 cm from TOP"}}, "name": "T1_I6", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.158803403377533, -0.136123895645142], "y": [0.421864718198776, -0.294497460126877], "z": [-0.214612245559692, -0.0150050427764654], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.136123895645142], "y": [-0.294497460126877], "z": [-0.0150050427764654], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.12193748862781553], "y": [0.33231944014689596], "z": [-0.18966134360649495], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.12193748862781553, 0.154346406459808], "y": [0.33231944014689596, 0.100275993347168], "z": [-0.18966134360649495, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 1 / index 7  |  offset=10 cm from TOP"}}, "name": "T1_I7", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.106687784194946, -0.139262124896049], "y": [0.444586962461472, -0.288464456796646], "z": [-0.223310381174088, -0.0180200319737196], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.139262124896049], "y": [-0.288464456796646], "z": [-0.0180200319737196], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.07594404240092542], "y": [0.35295552564287214], "z": [-0.19764908488840655], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.07594404240092542, 0.154346406459808], "y": [0.35295552564287214, 0.100275993347168], "z": [-0.19764908488840655, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 1 / index 8  |  offset=10 cm from TOP"}}, "name": "T1_I8", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.741926550865173, -0.0352307297289371], "y": [0.0314023457467556, -0.193678870797157], "z": [-0.0621257312595844, 0.237739607691765], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0352307297289371], "y": [-0.193678870797157], "z": [0.237739607691765], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.6535895566017575], "y": [0.003267188384888098], "z": [-0.0246425568378753], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.6535895566017575, 0.154346406459808], "y": [0.003267188384888098, 0.100275993347168], "z": [-0.0246425568378753, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 2 / index -6  |  offset=10 cm from TOP"}}, "name": "T2_I-6", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.589379906654358, -0.000205874443054199], "y": [0.0893587544560432, -0.260463625192642], "z": [-0.150808423757553, 0.262105882167816], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.000205874443054199], "y": [-0.260463625192642], "z": [0.262105882167816], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.5157331504169902], "y": [0.045630955687202025], "z": [-0.0991941339673654], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.5157331504169902, 0.154346406459808], "y": [0.045630955687202025, 0.100275993347168], "z": [-0.0991941339673654, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 2 / index -5  |  offset=10 cm from TOP"}}, "name": "T2_I-5", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.411601364612579, 0.0185813251882792], "y": [0.118865668773651, -0.332451581954956], "z": [-0.219371512532234, 0.281882494688034], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0185813251882792], "y": [-0.332451581954956], "z": [0.281882494688034], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.35782852784822705], "y": [0.062451011866837755], "z": [-0.15671476100136617], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.35782852784822705, 0.154346406459808], "y": [0.062451011866837755, 0.100275993347168], "z": [-0.15671476100136617, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 2 / index -4  |  offset=10 cm from TOP"}}, "name": "T2_I-4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.219658061861992, -0.00680490303784609], "y": [0.18196764588356, -0.407181352376938], "z": [-0.214969873428345, 0.282621383666992], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.00680490303784609], "y": [-0.407181352376938], "z": [0.282621383666992], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.19305141843306278], "y": [0.10832402504268517], "z": [-0.1527709696205504], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.19305141843306278, 0.154346406459808], "y": [0.10832402504268517, 0.100275993347168], "z": [-0.1527709696205504, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 2 / index -3  |  offset=10 cm from TOP"}}, "name": "T2_I-3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.00574809964746237, -0.0430422201752663], "y": [0.221256956458092, -0.456178784370422], "z": [-0.159849599003792, 0.264048904180527], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0430422201752663], "y": [-0.456178784370422], "z": [0.264048904180527], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.010409864803104999], "y": [0.13657748722575297], "z": [-0.10686228508656292], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.010409864803104999, 0.154346406459808], "y": [0.13657748722575297, 0.100275993347168], "z": [-0.10686228508656292, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 2 / index -2  |  offset=10 cm from TOP"}}, "name": "T2_I-2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.201370283961296, -0.0671667978167534], "y": [0.15148138999939, -0.49646657705307], "z": [-0.134329333901405, 0.250444829463959], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0671667978167534], "y": [-0.49646657705307], "z": [0.250444829463959], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.16780314583052067], "y": [0.0704878870999225], "z": [-0.0862325593132541], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.16780314583052067, 0.154346406459808], "y": [0.0704878870999225, 0.100275993347168], "z": [-0.0862325593132541, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 2 / index -1 (MIN)  |  offset=10 cm from TOP"}}, "name": "T2_I-1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.201370283961296, -0.0671667978167534], "y": [0.15148138999939, -0.49646657705307], "z": [-0.134329333901405, 0.250444829463959], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0671667978167534], "y": [-0.49646657705307], "z": [0.250444829463959], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.16780314583052067], "y": [0.0704878870999225], "z": [-0.0862325593132541], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.16780314583052067, 0.154346406459808], "y": [0.0704878870999225, 0.100275993347168], "z": [-0.0862325593132541, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 2 / index 0  |  offset=10 cm from TOP"}}, "name": "T2_I0", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.379457384347916, -0.0951606780290604], "y": [0.0340693816542625, -0.52280592918396], "z": [-0.0935177132487297, 0.229944005608559], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0951606780290604], "y": [-0.52280592918396], "z": [0.229944005608559], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.3201301219400344], "y": [-0.03554003761037719], "z": [-0.0530849952492436], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.3201301219400344, 0.154346406459808], "y": [-0.03554003761037719, 0.100275993347168], "z": [-0.0530849952492436, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 2 / index 1  |  offset=10 cm from TOP"}}, "name": "T2_I1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.522590398788452, -0.123416125774384], "y": [-0.0795088708400726, -0.505653560161591], "z": [-0.013065492734313, 0.189607098698616], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.123416125774384], "y": [-0.505653560161591], "z": [0.189607098698616], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.44183957724586914], "y": [-0.13277696094490282], "z": [0.01226858306847925], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.44183957724586914, 0.154346406459808], "y": [-0.13277696094490282, 0.100275993347168], "z": [0.01226858306847925, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 2 / index 2  |  offset=10 cm from TOP"}}, "name": "T2_I2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.609885334968567, -0.145530626177788], "y": [-0.277336597442627, -0.494646072387695], "z": [0.00993106700479984, 0.158669486641884], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.145530626177788], "y": [-0.494646072387695], "z": [0.158669486641884], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.5154583250512591], "y": [-0.3045002860607807], "z": [0.028523372368380276], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.5154583250512591, 0.154346406459808], "y": [-0.3045002860607807, 0.100275993347168], "z": [0.028523372368380276, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 2 / index 3  |  offset=10 cm from TOP"}}, "name": "T2_I3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.629540860652924, -0.15870800614357], "y": [-0.472104966640472, -0.464443802833557], "z": [-0.00637028273195028, 0.130030691623688], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.15870800614357], "y": [-0.464443802833557], "z": [0.130030691623688], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.531009767332586], "y": [-0.47114732131068], "z": [0.01067983646180206], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.531009767332586, 0.154346406459808], "y": [-0.47114732131068, 0.100275993347168], "z": [0.01067983646180206, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 2 / index 4  |  offset=10 cm from TOP"}}, "name": "T2_I4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.876320362091064, -0.0960212796926498], "y": [-0.230848073959351, -0.119515895843506], "z": [0.0750797614455223, 0.21196947991848], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0960212796926498], "y": [-0.119515895843506], "z": [0.21196947991848], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.7787830001773226], "y": [-0.21693155503156664], "z": [0.09219097215196997], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.7787830001773226, 0.154346406459808], "y": [-0.21693155503156664, 0.100275993347168], "z": [0.09219097215196997, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 3 / index -6  |  offset=10 cm from TOP"}}, "name": "T3_I-6", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.731360971927643, -0.00917578861117363], "y": [-0.117329388856888, -0.193694263696671], "z": [-0.0724397450685501, 0.263144791126251], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.00917578861117363], "y": [-0.193694263696671], "z": [0.263144791126251], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.6410878250035654], "y": [-0.12687499810712602], "z": [-0.03049167850445604], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.6410878250035654, 0.154346406459808], "y": [-0.12687499810712602, 0.100275993347168], "z": [-0.03049167850445604, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 3 / index -5  |  offset=10 cm from TOP"}}, "name": "T3_I-5", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.55326235294342, -0.00168730691075325], "y": [-0.00862355343997478, -0.321635574102402], "z": [-0.172450795769691, 0.315184861421585], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.00168730691075325], "y": [-0.321635574102402], "z": [0.315184861421585], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.48431547707214784], "y": [-0.04775005325184318], "z": [-0.11149634293757006], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.48431547707214784, 0.154346406459808], "y": [-0.04775005325184318, 0.100275993347168], "z": [-0.11149634293757006, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 3 / index -4  |  offset=10 cm from TOP"}}, "name": "T3_I-4", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.29842284321785, 0.0067034037783742], "y": [0.0286020040512085, -0.411231994628906], "z": [-0.251898497343063, 0.342613071203232], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [0.0067034037783742], "y": [-0.411231994628906], "z": [0.342613071203232], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.26028206169183915], "y": [-0.026377246722906585], "z": [-0.17758455000541934], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.26028206169183915, 0.154346406459808], "y": [-0.026377246722906585, 0.100275993347168], "z": [-0.17758455000541934, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 3 / index -3  |  offset=10 cm from TOP"}}, "name": "T3_I-3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [-0.02208018489182, -0.000968339270912111], "y": [-0.00487819686532021, -0.493570655584335], "z": [-0.279865384101868, 0.353170096874237], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.000968339270912111], "y": [-0.493570655584335], "z": [0.353170096874237], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [-0.019441204084902866], "y": [-0.06596475661959539], "z": [-0.20073594585232596], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [-0.019441204084902866, 0.154346406459808], "y": [-0.06596475661959539, 0.100275993347168], "z": [-0.20073594585232596, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 3 / index -2  |  offset=10 cm from TOP"}}, "name": "T3_I-2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.236124157905579, -0.0743685960769653], "y": [0.0547721870243549, -0.546591699123383], "z": [-0.12332821637392, 0.30323451757431], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0743685960769653], "y": [-0.546591699123383], "z": [0.30323451757431], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.197312564865522], "y": [-0.02039829640491484], "z": [-0.07000787628964367], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.197312564865522, 0.154346406459808], "y": [-0.02039829640491484, 0.100275993347168], "z": [-0.07000787628964367, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 3 / index -1 (MIN)  |  offset=10 cm from TOP"}}, "name": "T3_I-1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.236124157905579, -0.0743685960769653], "y": [0.0547721870243549, -0.546591699123383], "z": [-0.12332821637392, 0.30323451757431], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0743685960769653], "y": [-0.546591699123383], "z": [0.30323451757431], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.197312564865522], "y": [-0.02039829640491484], "z": [-0.07000787628964367], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.197312564865522, 0.154346406459808], "y": [-0.02039829640491484, 0.100275993347168], "z": [-0.07000787628964367, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 3 / index 0  |  offset=10 cm from TOP"}}, "name": "T3_I0", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.457305043935776, -0.0990181416273117], "y": [-0.111172020435333, -0.585712850093842], "z": [-0.0486920475959778, 0.275831401348114], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.0990181416273117], "y": [-0.585712850093842], "z": [0.275831401348114], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.38776464328054044], "y": [-0.17048962624088573], "z": [-0.008126615043047035], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.38776464328054044, 0.154346406459808], "y": [-0.17048962624088573, 0.100275993347168], "z": [-0.008126615043047035, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 3 / index 1  |  offset=10 cm from TOP"}}, "name": "T3_I1", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.604154527187347, -0.119679406285286], "y": [-0.339769959449768, -0.602608978748322], "z": [0.0186751633882523, 0.235424026846886], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.119679406285286], "y": [-0.602608978748322], "z": [0.235424026846886], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.5136752843102778], "y": [-0.37262483729528656], "z": [0.04576877167781711], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.5136752843102778, 0.154346406459808], "y": [-0.37262483729528656, 0.100275993347168], "z": [0.04576877167781711, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 3 / index 2  |  offset=10 cm from TOP"}}, "name": "T3_I2", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.667783379554749, -0.126498326659203], "y": [-0.548833012580872, -0.553370237350464], "z": [0.0615678913891315, 0.156941220164299], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.126498326659203], "y": [-0.553370237350464], "z": [0.156941220164299], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.5684981730322232], "y": [-0.5494001656384885], "z": [0.07348955667501508], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.5684981730322232, 0.154346406459808], "y": [-0.5494001656384885, 0.100275993347168], "z": [0.07348955667501508, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 3 / index 3  |  offset=10 cm from TOP"}}, "name": "T3_I3", "traces": [8, 9, 10, 11, 12]}, {"data": [{"legendgroup": "Bat", "line": {"color": "black", "width": 4}, "mode": "lines", "showlegend": false, "x": [0.654973447322845, -0.111996471881866], "y": [-0.754558205604553, -0.536801695823669], "z": [0.0540022104978561, 0.119876697659492], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "white", "line": {"color": "red", "width": 3}, "size": 10, "symbol": "circle"}, "mode": "markers", "showlegend": false, "x": [-0.111996471881866], "y": [-0.536801695823669], "z": [0.119876697659492], "type": "scatter3d"}, {"legendgroup": "Bat", "marker": {"color": "orange", "size": 7}, "mode": "markers", "showlegend": false, "x": [0.5591022225950478], "y": [-0.7273386461897701], "z": [0.06223652008988057], "type": "scatter3d"}, {"legendgroup": "Ball", "marker": {"color": "blue", "size": 7, "symbol": "x"}, "mode": "markers", "showlegend": false, "x": [0.154346406459808], "y": [0.100275993347168], "z": [0.0176963210105896], "type": "scatter3d"}, {"legendgroup": "Bat", "line": {"color": "purple", "dash": "dash", "width": 3}, "mode": "lines", "showlegend": false, "x": [0.5591022225950478, 0.154346406459808], "y": [-0.7273386461897701, 0.100275993347168], "z": [0.06223652008988057, 0.0176963210105896], "type": "scatter3d"}], "layout": {"title": {"text": "Z1 (Z1) / trial 3 / index 4  |  offset=10 cm from TOP"}}, "name": "T3_I4", "traces": [8, 9, 10, 11, 12]}]};
    const trialInfo = {"1": [{"name": "T1_I-2", "index": -2}, {"name": "T1_I-1", "index": -1}, {"name": "T1_I0", "index": 0}, {"name": "T1_I1", "index": 1}, {"name": "T1_I2", "index": 2}, {"name": "T1_I3", "index": 3}, {"name": "T1_I4", "index": 4}, {"name": "T1_I5", "index": 5}, {"name": "T1_I6", "index": 6}, {"name": "T1_I7", "index": 7}, {"name": "T1_I8", "index": 8}], "2": [{"name": "T2_I-6", "index": -6}, {"name": "T2_I-5", "index": -5}, {"name": "T2_I-4", "index": -4}, {"name": "T2_I-3", "index": -3}, {"name": "T2_I-2", "index": -2}, {"name": "T2_I-1", "index": -1}, {"name": "T2_I0", "index": 0}, {"name": "T2_I1", "index": 1}, {"name": "T2_I2", "index": 2}, {"name": "T2_I3", "index": 3}, {"name": "T2_I4", "index": 4}], "3": [{"name": "T3_I-6", "index": -6}, {"name": "T3_I-5", "index": -5}, {"name": "T3_I-4", "index": -4}, {"name": "T3_I-3", "index": -3}, {"name": "T3_I-2", "index": -2}, {"name": "T3_I-1", "index": -1}, {"name": "T3_I0", "index": 0}, {"name": "T3_I1", "index": 1}, {"name": "T3_I2", "index": 2}, {"name": "T3_I3", "index": 3}, {"name": "T3_I4", "index": 4}]};  // { trial: [{name, index}, ...], ... }
    let currentTrial = "1";  // 文字列として扱う

    document.addEventListener("DOMContentLoaded", function() {
      const plotDiv = document.getElementById("plot");
      const slider = document.getElementById("frameSlider");
      const frameLabel = document.getElementById("frameLabel");

      // Plot を生成
      Plotly.newPlot(plotDiv, fig.data, fig.layout, {responsive: true}).then(function(gd) {
        // frames を追加
        Plotly.addFrames(gd, fig.frames);

        // Trial ボタンにイベントを付与
        Object.keys(trialInfo).forEach(function(trialKey) {
          const btn = document.getElementById("trialBtn_" + trialKey);
          if (!btn) return;
          btn.addEventListener("click", function() {
            // active クラス切り替え
            document.querySelectorAll(".trial-btn").forEach(b => b.classList.remove("active"));
            btn.classList.add("active");

            currentTrial = trialKey;
            updateSliderForTrial(gd, currentTrial);
          });
        });

        // スライダー操作でフレーム更新
        slider.addEventListener("input", function(e) {
          const idxInTrial = parseInt(slider.value);
          updateFrameForCurrentTrial(gd, idxInTrial);
        });

        // 初期 Trial ボタンを active に
        const initBtn = document.getElementById("trialBtn_1");
        if (initBtn) {
          initBtn.classList.add("active");
        }

        // 初期表示
        updateSliderForTrial(gd, currentTrial);

        // ===== 関数群 =====
        function updateSliderForTrial(gd, trialKey) {
          const framesForTrial = trialInfo[trialKey];
          if (!framesForTrial || framesForTrial.length === 0) return;

          slider.min = 0;
          slider.max = framesForTrial.length - 1;
          slider.value = 0;

          updateFrame(gd, trialKey, 0);
        }

        function updateFrameForCurrentTrial(gd, idxInTrial) {
          updateFrame(gd, currentTrial, idxInTrial);
        }

        function updateFrame(gd, trialKey, idxInTrial) {
          const framesForTrial = trialInfo[trialKey];
          if (!framesForTrial || framesForTrial.length === 0) return;

          const clampedIdx = Math.max(0, Math.min(idxInTrial, framesForTrial.length - 1));
          const frameInfo = framesForTrial[clampedIdx];
          const frameName = frameInfo.name;
          const indexValue = frameInfo.index;

          Plotly.animate(gd, [frameName], {
            mode: "immediate",
            frame: {duration: 0, redraw: true},
            transition: {duration: 0}
          });

          frameLabel.textContent = "Trial " + trialKey + " / frame index = " + indexValue + " (step " + clampedIdx + ")";
        }
      });
    });
  </script>
</body>
</html>
